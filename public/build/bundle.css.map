{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../DiaSemana.svelte",
    "../../CitasProgramadas.svelte",
    "../../Index.svelte",
    "../../Crear.svelte",
    "../../Gestion.svelte",
    "../../EspacioTrabajo.svelte",
    "../../Perfil.svelte",
    "../../Index.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { createEventDispatcher } from 'svelte';\n  import Horario from \"./Horario.svelte\";\n  import Tanda from \"./Tanda.svelte\";\n\n  export let item = {};\n  export let tandas = {};\n  export let horarios = {};\n  export let medicoID = {};\n  $: horariosFiltrados = horarios.filter(x => x.dia == item.dia);\n\n  const dispatch = createEventDispatcher();\n  \n  const actualizar = function () {\n    dispatch('cambioHorario')\n  }\n</script>\n\n<style>\n  .card.card-vnc {\n    box-shadow: none;\n    border: #687ae8 solid 1px;\n  }\n</style>\n\n<div class=\"card m-b-30 card-vnc\">\n  <div class=\"card-header\">\n    <h5 class=\"m-b-0\">\n      <div\n        class=\"custom-control custom-checkbox\"\n        style=\"margin-left: 15px; padding-left: 0;\">\n        <input\n          type=\"checkbox\"\n          class=\"custom-control-input\"\n          id={item.dia}\n          bind:checked={item.check}\n          disabled />\n        <label class=\"custom-control-label\" for={item.dia}>{item.nombre}</label>\n      </div>\n    </h5>\n  </div>\n  <div class=\"card-body\">\n    <div class=\"row\">\n      {#each tandas as i}\n        <Tanda on:cambioHorario={actualizar} {i} {horarios} dia={item.dia} {medicoID}/>\n      {/each}\n    </div>\n\n    {#each horariosFiltrados as horario}\n      <Horario on:cambioHorario={actualizar} {horario} />\n    {/each}\n\n  </div>\n</div>\n",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { connection, activePage, session, axios, dataCita, errorConexion, toast }\n    from \"../../store.js\";\n  import { onMount } from \"svelte\";\n  import { push } from \"svelte-spa-router\";\n  import moment from \"moment\";\n  // import Swal from \"sweetalert2\";\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n  $activePage = \"citasProgramadas\";\n\n  onMount(() => {\n    moment.locale('es-DO');\n    jQuery(\"#sltMedicos\").select2();\n    jQuery(\"#sltMedicos\").on(\"select2:select\", e => {\n      let data = e.params.data;\n      idMedico = data.id;\n      cargarCitas()\n    });\n\n    cargarEstados();\n    cargarMedicos();\n    cargarCitas();\n  });\n\n  let horasDisponibles = [];\n  let citasPendientes = [];\n  let citasRealizadas = [];\n  let medicos = [];\n  let estados = [];\n  let idMedico = \"\";\n  let fecha = \"\";\n  let tandaID = 0;\n  let paciente = {\n    id: \"\",\n    nombre: \"\",\n    apellido: \"\",\n    cedula: \"\",\n    correo: \"\",\n    telefono: \"\",\n    aseguradoraID: 0,\n    nombreAseguradora: \"\",\n    provinciaID: 0,\n    nacionalidad: \"\",\n    noAfiliado: \"\",\n    sexo: \"\",\n    direccion: \"\",\n    observaciones: \"\"\n  };\n  let cita = {\n    id: 0,\n    medicoID: \"\",\n    pacienteID: \"\",\n    aseguradoraID: 0,\n    estadoID: 1,\n    fecha: \"\",\n    observaciones: \"\",\n    inactivo: false,\n  };\n  let filter = {\n    medicoID: \"\",\n    fechaInicio : \"\",\n    fechaFin : \"\",\n    estadoID : \"\",\n    nombrePaciente : \"\"\n  }\n  let provincias = [\n    { id: 1, nombre: \"Duarte\" },\n    { id: 2, nombre: \"Santiago\" },\n    { id: 3, nombre: \"Distrito Nacional\" }\n  ];\n  let aseguradoras = [\n    { id: 1, nombre: \"SENASA\" },\n    { id: 2, nombre: \"HUMANO SEGURO\" },\n    { id: 3, nombre: \"RENACER\" },\n    { id: 4, nombre: \"PALIC\" },\n    { id: 5, nombre: \"FUTURO\" }\n  ];\n  function colorEstado(code) {\n    if (code == 'p') {\n      return 'badge-secondary';\n    }\n    if (code == 't') {\n      return 'badge-primary';\n    }\n    if (code == 'r') {\n      return 'badge-success';\n    }\n    if (code == 'a') {\n      return 'badge-danger';\n    }\n  }\n\n  function cargarMedicos() {\n    $axios.get(\"/Medicos/Query?\")\n      .then(res => {\n        medicos = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarEstados() {\n    $axios.get(\"/Citas/Estados\")\n      .then(res => {\n        estados = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n\n  function cargarCitas() {\n    filter.medicoID = idMedico;\n\n    let qs = new URLSearchParams(filter).toString()\n    $axios.get(\"/Medicos/CitasFiltrada?\" + qs)\n      .then(res => {\n        citasPendientes = res.data;\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarDatosPaciente(item) {\n    $axios.get(\"/Pacientes/\" + item.pacienteID)\n      .then(res => {\n        paciente = res.data;\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function buscarDisponibilidadHorario() {\n    if (fecha == \"\" || tandaID <= 0) {\n      horasDisponibles = [];\n      return;\n    }\n\n    let params = \"date=\" + fecha + \"&\" + \"tandiId=\" + tandaID;\n    $axios.get(\"/Medicos/HorasDisponibles/\" + idMedico + \"?\" + params)\n      .then(res => {\n        horasDisponibles = res.data.map(x => {\n          return {\n            time: x,\n            hora: moment(x, \"LT\").format(\"LT\")\n          };\n        });\n      })\n      .catch(err => {\n        horasDisponibles = [];\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function reprogramarCita(item) {\n    cita = item;\n    if (fecha == \"\" || tandaID <= 0) {\n      fecha = moment().format(\"YYYY-MM-DD\");\n      tandaID = 1;\n    }\n\n    buscarDisponibilidadHorario();\n  }\n\n  function guardarPaciente() {\n    if (paciente.aseguradoraID > 0) {\n      paciente.nombreAseguradora = aseguradoras.find(e => e.id == paciente.aseguradoraID).nombre;\n    }\n\n    $axios.put(\"/Pacientes/\" + paciente.id, paciente)\n      .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Paciente actualizado con exito'\n          })\n          \n          jQuery(\"#modalPaciente\").modal(\"hide\");\n        } else {\n          console.log(res);\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cambiarFechaCita(hora) {\n    cita.fecha = fecha + \"T\" + hora;\n    cita.estadoID = 1;\n    cita.inactivo = false;\n\n    $axios.put(\"/Citas/\" + cita.id, cita)\n      .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Cambio de cita realizado con exito'\n          })\n          cargarCitas()\n          jQuery(\"#modalCrearCita\").modal(\"hide\");\n        } else {\n          console.log(res);\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n\n  function irACita(time) {\n    $dataCita = {\n      fechaCita: fecha,\n      tandaID: tandaID,\n      hora: time,\n      medicoId: idMedico,\n      pacienteId: cita.pacienteID\n    };\n    push('/Cita/Crear');\n  }\n  \n  function btnFiltro() {\n    jQuery(\"#filtroAvanzado\").slideToggle(500);\n  }\n\n</script>\n\n<style>\n  .modal-slide-right {\n    top: 0;\n    bottom: 0;\n  }\n\n  .modal-slide-right .modal-dialog {\n    height: 100% !important;\n    top: 0;\n    position: fixed !important;\n  }\n\n  .modal-slide-right .modal-body {\n    height: 100% !important;\n    top: 0;\n    overflow: auto;\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container mt-3\">\n      <div class=\"col-md-12\">\n        <div class=\"row\">\n\n          <div class=\"col-lg-6 mt-2\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"Buscar paciente\"\n             bind:value={filter.nombrePaciente} on:input={cargarCitas}>\n          </div>\n          <div class=\"col-lg-4 mt-2\">\n            <select class=\"form-control\" id=\"sltMedicos\" style=\"width: 100%\">\n              <option value={0} disabled selected>- Seleccionar medico -</option>\n              <option value={\"\"}>Todos</option>\n              {#each medicos as item}\n                <option value={item.id}>{item.name}</option>\n              {/each}\n            </select>\n          </div>\n          <div class=\"col-lg-2\">\n            <button class=\"btn btn-primary\" id=\"btnFiltro\" on:click={btnFiltro} style=\"margin-top: 8px;\">Filtros</button>\n          </div>\n          <div id=\"filtroAvanzado\" class=\"col-lg-12 mt-2\" style=\"display: none;\">\n              <div class=\"alert alert-secondary\">\n                <div class=\"row\">\n                  <div class=\"col-lg-6 col-md-6\">\n                    <label>Estados</label>\n                    <select class=\"form-control\" bind:value={filter.estadoID} on:change={cargarCitas}>\n                      <option value=\"\" disabled selected>- Buscar por estado -</option>\n                      <option value={0}>Todos</option>\n                      {#each estados as item}\n                        <option value={item.id}>{item.nombre}</option>\n                      {/each}\n                    </select>\n                  </div>\n                  <div class=\"col-lg-3 col-md-3\">\n                    <label>Desde</label>\n                    <input type=\"date\" class=\"form-control\" bind:value={filter.fechaInicio} on:input={cargarCitas}>\n                  </div>\n                  <div class=\"col-lg-3 col-md-3\">\n                    <label>Hasta</label>\n                    <input type=\"date\" class=\"form-control\" bind:value={filter.fechaFin} on:input={cargarCitas}>\n                  </div>\n                </div>\n              </div>\n          </div>\n\n          <div class=\"col-md-12 mt-2\">\n            <div class=\"alert alert-primary\" role=\"alert\">\n                \n              <h4 class:d-none={citasPendientes.length > 0}>No hay cita</h4>\n              <div class=\"table-responsive\">\n                {#if citasPendientes.length > 0}\n                  <table class=\"table align-td-middle table-card\">\n                    <thead>\n                      <tr>\n                        <th>Nombre</th>\n                        <th>Estado</th>\n                        <th>Fecha</th>\n                        <th />\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {#each citasPendientes as i}\n                        <tr class=\"cursor-table\">\n                          <td>{i.nombrePaciente}</td>\n                          <td>\n                            <span class=\"badge {colorEstado(i.codigoEstado)}\">{i.nombreEstado}</span>\n                          </td>\n                          <td>{moment(i.fecha).format('LLL')}</td>\n                          <td />\n                          <td style=\"text-align: right;\">\n                            <button\n                              class=\"btn btn-success btn-sm mb-1\"\n                              data-toggle=\"modal\"\n                              data-target=\"#modalPaciente\"\n                              on:click={() => cargarDatosPaciente(i)}>\n                              <i class=\"mdi mdi-account-search-outline\" />\n                              Ver paciente\n                            </button>\n                            {#if idMedico != \"\"}\n                            <button\n                              class=\"btn btn-success btn-sm mb-1\"\n                              data-toggle=\"modal\"\n                              data-target={i.codigoEstado == 'r' ? '#modalNuevaCita' : '#modalCrearCita'}\n                              on:click={() => reprogramarCita(i)}>\n                              <i class=\"mdi mdi-calendar-remove\" />\n                              {i.codigoEstado == 'r' ? 'Crear cita' : 'Reprogramar'}\n                            </button>\n                            {/if}\n                          </td>\n                        </tr>\n                      {/each}\n                    </tbody>\n                  </table>\n                {/if}\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </section>\n</main>\n\n<form id=\"frmPaciente\" on:submit|preventDefault={guardarPaciente}>\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalPaciente\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalPacienteLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalPacienteLabel\">\n          <i class=\"mdi mdi-account-search-outline\" />\n          Paciente\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n          <input type=\"hidden\" name=\"IdUser\" value=\"0\" />\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Nombre</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.nombre} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Apellido</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.apellidos} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Cedula</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.cedula} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Telefono</label>\n              <input\n                type=\"tel\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.telefono} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Correo electronico</label>\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.correo}/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Aseguradora</label>\n              <select\n                class=\"form-control js-select2\"\n                bind:value={paciente.aseguradoraID}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                {#each aseguradoras as item}\n                  <option value={item.id}>{item.nombre}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">No. Seguro</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.noAfiliado} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Pais</label>\n              <select class=\"form-control js-select2\" bind:value={paciente.nacionalidad}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                <option value={\"Rep. Dom.\"}>Rep. Dom.</option>\n                <option value={\"Haiti\"}>Haiti</option>\n                <option value={\"Venezuela\"}>Venezuela</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Provincia</label>\n              <select\n                class=\"form-control js-select2\"\n                bind:value={paciente.provinciaID}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                {#each provincias as item}\n                  <option value={item.id}>{item.nombre}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Direccion</label>\n              <textarea\n                class=\"form-control\"\n                rows=\"2\"\n                bind:value={paciente.direccion} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Observaciones</label>\n              <textarea\n                class=\"form-control\"\n                rows=\"3\"\n                bind:value={paciente.observaciones} />\n            </div>\n          </div>\n\n          <br />\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-danger\"\n            data-dismiss=\"modal\">\n            Cerrar\n          </button>\n          <button type=\"submit\" class=\"btn btn-outline-primary\">\n            Guardar\n            <i class=\"mdi mdi-content-save-outline\" />\n          </button>\n        </div>\n        \n      </div>\n    </div>\n  </div>\n</form>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalCrearCita\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalCrearCitaLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalCrearCitaLabel\">\n          <i class=\"mdi mdi-calendar-plus\" />\n          Reprogramacion de cita\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" style=\"height: 100%; top: 0; overflow: auto;\">\n\n        <div class=\"row\">\n          <div class=\"col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"inputAddress\">Fecha</label>\n              <input\n                type=\"date\"\n                class=\"form-control form-control-sm\"\n                bind:value={fecha}\n                on:change={buscarDisponibilidadHorario} />\n            </div>\n          </div>\n          <div class=\"col-lg-6\">\n            <div class=\"form-group \">\n              <label class=\"font-secondary\">Tanda</label>\n              <select\n                class=\"form-control form-control-sm js-select2\"\n                bind:value={tandaID}\n                on:change={buscarDisponibilidadHorario}>\n                <option value={0} disabled>- Seleccionar -</option>\n                <option value={1}>Matutina</option>\n                <option value={2}>Vespertina</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class=\"list-group list\">\n          {#if horasDisponibles.length <= 0}\n            <div class=\"alert alert-success\" role=\"alert\">\n              No hay disponibilidad en este horario\n            </div>\n          {/if}\n          {#each horasDisponibles as i}\n            <div\n              class=\"list-group-item d-flex align-items-center svelte-1nu1nbu\">\n              <div class=\"\">\n                <div class=\"name\">{i.hora}</div>\n              </div>\n              <div class=\"ml-auto\">\n                <button\n                  on:click={cambiarFechaCita(i.time)}\n                  class=\"btn btn-outline-success btn-sm\">\n                  Seleccionar\n                </button>\n              </div>\n            </div>\n          {/each}\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalNuevaCita\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalNuevaCitaLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalNuevaCitaLabel\">\n          <i class=\"mdi mdi-calendar-plus\" />\n          Creacion de cita\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" style=\"height: 100%; top: 0; overflow: auto;\">\n\n        <div class=\"row\">\n          <div class=\"col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"inputAddress\">Fecha</label>\n              <input\n                type=\"date\"\n                class=\"form-control form-control-sm\"\n                bind:value={fecha}\n                on:change={buscarDisponibilidadHorario} />\n            </div>\n          </div>\n          <div class=\"col-lg-6\">\n            <div class=\"form-group \">\n              <label class=\"font-secondary\">Tanda</label>\n              <select\n                class=\"form-control form-control-sm js-select2\"\n                bind:value={tandaID}\n                on:change={buscarDisponibilidadHorario}>\n                <option value={0} disabled>- Seleccionar -</option>\n                <option value={1}>Matutina</option>\n                <option value={2}>Vespertina</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class=\"list-group list\">\n          {#if horasDisponibles.length <= 0}\n            <div class=\"alert alert-success\" role=\"alert\">\n              No hay disponibilidad en este horario\n            </div>\n          {/if}\n          {#each horasDisponibles as i}\n            <div\n              class=\"list-group-item d-flex align-items-center svelte-1nu1nbu\">\n              <div class=\"\">\n                <div class=\"name\">{i.hora}</div>\n              </div>\n              <div class=\"ml-auto\">\n                <button\n                  on:click={() => irACita(i.time)}\n                  class=\"btn btn-outline-success btn-sm\">\n                  Seleccionar\n                </button>\n              </div>\n            </div>\n          {/each}\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { UserManager } from \"../../util.js\";\n  import { push } from \"svelte-spa-router\";\n  import { session, activePage, host, dataCita, connection, axios, errorConexion, toast } \n    from \"../../store\";\n  import { onMount } from \"svelte\";\n  import moment from \"moment\";\n  import Swal from 'sweetalert2';\n\n  let user = {};\n  user = new UserManager($session.authorizationHeader.Authorization)\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n  $activePage = \"asistente.index\";\n\n  let busqueda = \"\";\n  let medicos = [];\n  let citasPendientes = [];\n  let citasEnTurno = [];\n  let citasRealizadas = [];\n\n  let horasDisponibles = [];\n  let provincias = [\n    { id: 1, nombre: \"Duarte\" },\n    { id: 2, nombre: \"Santiago\" },\n    { id: 3, nombre: \"Distrito Nacional\" }\n  ];\n  let aseguradoras = [\n    { id: 1, nombre: \"SENASA\" },\n    { id: 2, nombre: \"HUMANO SEGURO\" },\n    { id: 3, nombre: \"RENACER\" },\n    { id: 4, nombre: \"PALIC\" },\n    { id: 5, nombre: \"FUTURO\" }\n  ];\n  let idMedico = \"\";\n  let pacienteEnviado = \"\";\n  let userNameMedico = \"\";\n  let fecha = \"\";\n  let tandaID = 0;\n\n  let paciente = {\n    id: \"\",\n    nombre: \"\",\n    apellido: \"\",\n    cedula: \"\",\n    correo: \"\",\n    telefono: \"\",\n    aseguradoraID: 0,\n    nombreAseguradora: \"\",\n    provinciaID: 0,\n    nacionalidad: \"\",\n    noAfiliado: \"\",\n    sexo: \"\",\n    direccion: \"\",\n    observaciones: \"\"\n  };\n  let cita = {\n    id: 0,\n    medicoID: \"\",\n    pacienteID: \"\",\n    aseguradoraID: 0,\n    estadoID: 1,\n    fecha: \"\",\n    observaciones: \"\",\n    inactivo: false,\n  };\n\n  onMount(() => {\n    jQuery(\"#sltMedicos\").select2();\n    jQuery(\"#sltMedicos\").on(\"select2:select\", e => {\n      let data = e.params.data;\n      idMedico = data.id.split('=')[0];\n      userNameMedico = data.id.split('=')[1];\n      \n      cargarPacienteEnviado();\n      cargarCitas();\n      cargarCitasRealizadas();\n    });\n\n    cargarMedicos();\n  });\n\n  $connection.on(\"RecibirAvisoDelPaciente\", (data, paciente) => {\n    if ($activePage == \"asistente.index\") {\n      if (citasEnTurno.length > 0) {\n        pacienteEnviado = paciente\n\n        if (pacienteEnviado == \"\") {\n          cargarCitas();\n          cargarCitasRealizadas();\n        }\n      }\n\n      if (paciente == \"\") {\n        Swal.fire({\n          title: 'Aviso',\n          text: 'El paciente ya fue atendido, favor de mandar otro',\n          icon: 'success'\n        });\n      }\n    }\n  });\n\n  function cargarMedicos() {\n    $axios.get(\"/MedicosAsistentes/\" + user.nameid + \"/Medicos\")\n      .then(res => {\n        medicos = res.data;\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion();\n      });\n  }\n  function cargarCitas() {\n    $axios.get(\"/Medicos/Citas/\" + idMedico)\n      .then(res => {\n        let array = res.data.filter (e =>\n            moment(e.fecha).format(\"YYYY-MM-DD\") ==\n            moment().format(\"YYYY-MM-DD\")\n        );\n\n        citasPendientes = array.filter(e => e.estadoID == 1);\n        citasEnTurno = array.filter(e => e.estadoID == 2);\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarCitasRealizadas() {\n    $axios.get(\"/Medicos/CitasRealizadas/\" + idMedico)\n      .then(res => {\n        citasRealizadas = res.data.filter (e =>\n            moment(e.fecha).format(\"YYYY-MM-DD\") ==\n            moment().format(\"YYYY-MM-DD\")\n        );\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function buscarDisponibilidadHorario() {\n    if (fecha == \"\" || tandaID <= 0) {\n      horasDisponibles = [];\n      return;\n    }\n\n    let params = \"date=\" + fecha + \"&\" + \"tandiId=\" + tandaID;\n    $axios.get(\"/Medicos/HorasDisponibles/\" + idMedico + \"?\" + params)\n      .then(res => {\n        horasDisponibles = res.data.map(x => {\n          return {\n            time: x,\n            hora: moment(x, \"LT\").format(\"LT\")\n          };\n        });\n      })\n      .catch(err => {\n        horasDisponibles = [];\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarDatosPaciente(item) {\n    cita = item;\n    $axios.get(\"/Pacientes/\" + item.pacienteID)\n      .then(res => {\n        paciente = res.data;\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function reprogramarCita(item) {\n    cita = item;\n    if (fecha == \"\" || tandaID <= 0) {\n      fecha = moment().format(\"YYYY-MM-DD\");\n      tandaID = 1;\n    }\n\n    buscarDisponibilidadHorario();\n  }\n  function guardarPaciente() {\n    if (paciente.aseguradoraID > 0) {\n      paciente.nombreAseguradora = aseguradoras.find(e => e.id == paciente.aseguradoraID).nombre;\n    }\n\n    $axios.put(\"/Pacientes/\" + paciente.id, paciente)\n      .then(res => {\n        if (res.data.success) {\n          Swal.fire({\n            title: 'Actualizado',\n            text: 'Paciente actualizado con exito',\n            icon: 'success'\n          });\n\n          jQuery(\"#modalPaciente\").modal(\"hide\");\n        } else {\n          console.log(res);\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function guardarEnviarPaciente() {\n    if (paciente.aseguradoraID > 0) {\n      paciente.nombreAseguradora = aseguradoras.find(e => e.id == paciente.aseguradoraID).nombre;\n    }\n\n    $axios.put(\"/Pacientes/\" + paciente.id, paciente)\n      .then(res => {\n        if (res.data.success) {\n          pacienteEnviado = paciente.id;\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Se ha enviado correctamente'\n          })\n          jQuery(\"#modalPaciente\").modal(\"hide\");\n        } else {\n          console.log(res);\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cambiarFechaCita(hora) {\n    cita.fecha = fecha + \"T\" + hora;\n    cita.estadoID = 1;\n\n    $axios.put(\"/Citas/\" + cita.id, cita)\n      .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Cambio de cita realizado con exito'\n          })\n          jQuery(\"#modalCrearCita\").modal(\"hide\");\n          cargarCitas()\n        } else {\n          console.log(res);\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cambiarEstadoCita(item) {\n    item.estadoID = 2;\n    $axios.put(\"/Citas/\" + item.id, item)\n      .then(res => {\n        if (res.data.success) {\n          cargarCitas();\n          $connection.invoke(\"EnviarPaciente\", item.medicoID, item.pacienteID, \"encolar\")\n          .catch(err => console.error(err));\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function anularCita() {\n    Swal.fire({\n      title: 'Estas seguro que deseas anular la cita?',\n      text: \"Este cambio no se puede deshacer!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      cancelButtonText: 'No',\n      confirmButtonText: 'Si'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        cita.inactivo = true;\n        cita.estadoID = 4;\n        $axios.put(\"/Citas/\" + cita.id, cita)\n          .then(res => {\n            if (res.data.success) {\n              $toast(5000).fire({\n                title: 'Cita anulada con exito',\n                icon: 'success'\n              });\n              cargarCitas();\n              jQuery(\"#modalCrearCita\").modal(\"hide\");\n            }\n          })\n          .catch(err => {\n            console.error(err);\n            $errorConexion()\n          });\n      }\n    })\n  }\n  function irACita(time) {\n    let cita = medicos.find(x => x.medicoID == idMedico);\n\n    $dataCita = {\n      fechaCita: fecha,\n      tandaID: tandaID,\n      hora: time,\n      medicoId: idMedico,\n      pacienteId: cita.pacienteID,\n      ubicacion: cita.ubicacion\n    };\n    push('/Cita/Crear');\n  }\n\n  function cargarPacienteEnviado() {\n    $axios.get(\"/Medicos/\" + idMedico + \"/PacientePendiente\")\n      .then(res => {\n        pacienteEnviado = res.data.data || \"\";\n      }).catch(err => {\n        console.error(err);\n        $errorConexion();\n      });\n  }\n\n  function enviarPaciente() {\n    $axios.post(\"/Medicos/\" + cita.medicoID + \"/AsignarPaciente?pacienteId=\" + cita.pacienteID)\n    .then(res => {\n      if (!res.data.errors) {\n        $connection.invoke(\"EnviarPaciente\", cita.medicoID, cita.pacienteID, \"asignar\")\n          .catch(err => console.error(err));\n        guardarEnviarPaciente()\n      } else {\n        $toast(5000).fire({\n          icon: 'error',\n          title: 'Error de conexion'\n        })\n      }\n\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    });\n  }\n</script>\n\n<style>\n  .cursor-table {\n    cursor: pointer;\n  }\n\n  .cursor-table td {\n    padding: 20px;\n  }\n\n  .circulo-rojo {\n    background-color: #f2545b;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    display: block;\n    float: right;\n  }\n\n  .circulo-verde {\n    background-color: #0c9;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    display: block;\n    float: right;\n  }\n  .modal-slide-right {\n    top: 0;\n    bottom: 0;\n  }\n\n  .modal-slide-right .modal-dialog {\n    height: 100% !important;\n    top: 0;\n    position: fixed !important;\n  }\n\n  .modal-slide-right .modal-body {\n    height: 100% !important;\n    top: 0;\n    overflow: auto;\n  }\n  tbody tr.active-turno{\n    -webkit-box-shadow: 0px 0px 0px 3px #0c9;\n-moz-box-shadow: 0px 0px 0px 3px#0c9;\nbox-shadow: 0px 0px 0px 3px #0c9;\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container mt-3\">\n      <div class=\"mt-4 col-md-12\">\n        <div class=\"row\">\n          <div class=\"col-md-5\">\n            <div class=\"input-group input-group-flush mb-3\">\n              <input\n                type=\"search\"\n                class=\"form-control form-control-appended\"\n                data-bind=\"textInput: busqueda\"\n                placeholder=\"Buscar\"\n                bind:value={busqueda} />\n              <div class=\"input-group-append\">\n                <div class=\"input-group-text\">\n                  <span class=\"mdi mdi-magnify\" />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-lg-4\">\n            <select class=\"form-control\" id=\"sltMedicos\" style=\"width: 100%\">\n              <option value={0} disabled selected>- Seleccionar -</option>\n              {#each medicos as item}\n                <option value={item.medicoID + \"=\" + item.userName}>{item.name}</option>\n              {/each}\n            </select>\n          </div>\n\n          <a href=\"#/Cita/Crear\" class=\"btn m-b-30 ml-2 mr-2 ml-3 btn-primary\">\n            <i class=\"mdi mdi-plus\" />\n            Nueva cita\n          </a>\n        </div>\n      </div>\n      <div class=\"col-md-12 m-b-30\">\n\n        <div class=\"alert alert-success\" role=\"alert\">\n          <h4 class=\"alert-heading\">Consultas en turno</h4>\n          <div class=\"table-responsive\">\n            <h4 class:d-none={citasEnTurno.length > 0}>No hay cita</h4>\n            {#if citasEnTurno.length > 0}\n              <table class=\"table align-td-middle table-card\">\n                <thead>\n                  <tr>\n                    <th>Nombre</th>\n                    <th>Celular</th>\n                    <th>Observacion</th>\n                    <th />\n                  </tr>\n                </thead>\n                <tbody>\n                  {#each citasEnTurno as i}\n                    <tr class:active-turno={pacienteEnviado == i.pacienteID}>\n                      <td>\n                       {i.nombrePaciente}\n                      </td>\n                      <td />\n                      <td>{i.observaciones}</td>\n                      <td style=\"text-align: right;\">\n                        <button\n                          class=\"btn btn-success btn-sm mb-1\"\n                          data-toggle=\"modal\"\n                          data-target=\"#modalPaciente\"\n                          on:click={() => cargarDatosPaciente(i)}>\n                          <i class=\"mdi mdi-account-search-outline\" />\n                          Ver paciente\n                        </button>\n                      </td>\n                    </tr>\n                  {/each}\n                </tbody>\n              </table>\n            {/if}\n          </div>\n        </div>\n\n        <div class=\"alert alert-primary\" role=\"alert\">\n          <h4 class=\"alert-heading\">Consultas pendientes</h4>\n          <h4 class:d-none={citasPendientes.length > 0}>No hay cita</h4>\n          <div class=\"table-responsive\">\n            {#if citasPendientes.length > 0}\n              <table class=\"table align-td-middle table-card\">\n                <thead>\n                  <tr>\n                    <th>Nombre</th>\n                    <th>Celular</th>\n                    <th>Observacion</th>\n                    <th />\n                  </tr>\n                </thead>\n                <tbody>\n                  {#each citasPendientes as i}\n                    <tr class=\"cursor-table\">\n                      <td>{i.nombrePaciente}</td>\n                      <td />\n                      <td>{i.observaciones}</td>\n                      <td />\n                      <td style=\"text-align: right;\">\n                        <button\n                          class=\"btn btn-success btn-sm mb-1\"\n                          data-toggle=\"modal\"\n                          data-target=\"#modalPaciente\"\n                          on:click={() => cargarDatosPaciente(i)}>\n                          <i class=\"mdi mdi-account-search-outline\" />\n                          Ver paciente\n                        </button>\n                        <button\n                          class=\"btn btn-success btn-sm mb-1\"\n                          data-toggle=\"modal\"\n                          data-target=\"#modalCrearCita\"\n                          on:click={() => reprogramarCita(i)}>\n                          <i class=\"mdi mdi-calendar-remove\" />\n                          Reprogramar\n                        </button>\n                        <button\n                          class=\"btn btn-primary btn-sm mb-1\"\n                          title=\"Poner en cola\"\n                          on:click={() => cambiarEstadoCita(i)}>\n                          <i class=\"mdi mdi-ticket-confirmation\" />\n                        </button>\n                      </td>\n                    </tr>\n                  {/each}\n                </tbody>\n              </table>\n            {/if}\n          </div>\n        </div>\n\n        <div class=\"alert alert-secondary\" role=\"alert\">\n          <h4 class=\"alert-heading\">Consultas realizadas</h4>\n          <h4 class:d-none={citasRealizadas.length > 0}>No hay cita</h4>\n          <div class=\"table-responsive\">\n            {#if citasRealizadas.length > 0}\n              <table class=\"table align-td-middle table-card\">\n                <thead>\n                  <tr>\n                    <th>Nombre</th>\n                    <th>Celular</th>\n                    <th>Observacion</th>\n                    <th />\n                  </tr>\n                </thead>\n                <tbody>\n                  {#each citasRealizadas as i}\n                    <tr class=\"cursor-table\">\n                      <td>{i.nombrePaciente}</td>\n                      <td />\n                      <td>{i.observaciones}</td>\n                      <td />\n                      <td style=\"text-align: right;\">\n                        <button\n                          class=\"btn btn-success btn-sm mb-1\"\n                          data-toggle=\"modal\"\n                          data-target=\"#modalPaciente\"\n                          on:click={() => cargarDatosPaciente(i)}>\n                          <i class=\"mdi mdi-account-search-outline\" />\n                          Ver paciente\n                        </button>\n                        <button\n                          class=\"btn btn-success btn-sm mb-1\"\n                          data-toggle=\"modal\"\n                          data-target=\"#modalNuevaCita\"\n                          on:click={() => reprogramarCita(i)}>\n                          <i class=\"mdi mdi-calendar-remove\" />\n                          Crear cita\n                        </button>\n                      </td>\n                    </tr>\n                  {/each}\n                </tbody>\n              </table>\n            {/if}\n\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </section>\n</main>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalPaciente\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalPacienteLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalPacienteLabel\">\n          <i class=\"mdi mdi-account-search-outline\" />\n          Paciente\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form id=\"frmPaciente\" on:submit|preventDefault={guardarPaciente}>\n          <input type=\"hidden\" name=\"IdUser\" value=\"0\" />\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Nombre</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.nombre} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Apellido</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.apellidos} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Cedula</label>\n              <input\n                type=\"name\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.cedula} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Telefono</label>\n              <input\n                type=\"tel\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                required\n                bind:value={paciente.telefono} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Correo electronico</label>\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.correo}/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Aseguradora</label>\n              <select\n                class=\"form-control js-select2\"\n                bind:value={paciente.aseguradoraID}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                {#each aseguradoras as item}\n                  <option value={item.id}>{item.nombre}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">No. Seguro</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                name=\"Name\"\n                maxlength=\"200\"\n                bind:value={paciente.noAfiliado} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Pais</label>\n              <select class=\"form-control js-select2\" bind:value={paciente.nacionalidad}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                <option value={\"Rep. Dom.\"}>Rep. Dom.</option>\n                <option value={\"Haiti\"}>Haiti</option>\n                <option value={\"Venezuela\"}>Venezuela</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Provincia</label>\n              <select\n                class=\"form-control js-select2\"\n                bind:value={paciente.provinciaID}>\n                <option value=\"0\" disabled selected>- Seleccionar -</option>\n                {#each provincias as item}\n                  <option value={item.id}>{item.nombre}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Direccion</label>\n              <textarea\n                class=\"form-control\"\n                rows=\"2\"\n                bind:value={paciente.direccion} />\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-12\">\n              <label for=\"\">Observaciones</label>\n              <textarea\n                class=\"form-control\"\n                rows=\"3\"\n                bind:value={paciente.observaciones} />\n            </div>\n          </div>\n\n          <br />\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger\"\n              data-dismiss=\"modal\">\n              Cerrar\n            </button>\n            <button type=\"submit\" class=\"btn btn-outline-primary\">\n              Guardar\n              <i class=\"mdi mdi-content-save-outline\" />\n            </button>\n            {#if cita.estadoID == 2}\n            <button\n              type=\"button\"\n              class=\"btn btn-success\"\n              title=\"Guardar y enviar\"\n              on:click={enviarPaciente}>\n              Enviar paciente\n              <i class=\"mdi mdi-send\" />\n            </button>\n            {/if}\n          </div>\n        </form>\n      </div>\n      \n    </div>\n  </div>\n</div>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalCrearCita\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalCrearCitaLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalCrearCitaLabel\">\n          <i class=\"mdi mdi-calendar-plus\" />\n          Reprogramacion de cita\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" style=\"height: 100%; top: 0; overflow: auto;\">\n\n        <div class=\"row\">\n          <div class=\"col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"inputAddress\">Fecha</label>\n              <input\n                type=\"date\"\n                class=\"form-control form-control-sm\"\n                bind:value={fecha}\n                on:change={buscarDisponibilidadHorario} />\n            </div>\n          </div>\n          <div class=\"col-lg-6\">\n            <div class=\"form-group \">\n              <label class=\"font-secondary\">Tanda</label>\n              <select\n                class=\"form-control form-control-sm js-select2\"\n                bind:value={tandaID}\n                on:change={buscarDisponibilidadHorario}>\n                <option value={0} disabled>- Seleccionar -</option>\n                <option value={1}>Matutina</option>\n                <option value={2}>Vespertina</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class=\"list-group list\">\n          {#if horasDisponibles.length <= 0}\n            <div class=\"alert alert-success\" role=\"alert\">\n              No hay disponibilidad en este horario\n            </div>\n          {/if}\n          {#each horasDisponibles as i}\n            <div\n              class=\"list-group-item d-flex align-items-center svelte-1nu1nbu\">\n              <div class=\"\">\n                <div class=\"name\">{i.hora}</div>\n              </div>\n              <div class=\"ml-auto\">\n                <button\n                  on:click={cambiarFechaCita(i.time)}\n                  class=\"btn btn-outline-success btn-sm\">\n                  Seleccionar\n                </button>\n              </div>\n            </div>\n          {/each}\n        </div>\n\n      </div>\n      <div class=\"modal-footer\" class:d-none={cita.estadoID == 3}>\n        <button on:click={anularCita}\n          type=\"button\" class=\"btn btn-danger\">\n          Anular cita\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalNuevaCita\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalNuevaCitaLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalNuevaCitaLabel\">\n          <i class=\"mdi mdi-calendar-plus\" />\n          Creacion de cita\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" style=\"height: 100%; top: 0; overflow: auto;\">\n\n        <div class=\"row\">\n          <div class=\"col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"inputAddress\">Fecha</label>\n              <input\n                type=\"date\"\n                class=\"form-control form-control-sm\"\n                bind:value={fecha}\n                on:change={buscarDisponibilidadHorario} />\n            </div>\n          </div>\n          <div class=\"col-lg-6\">\n            <div class=\"form-group \">\n              <label class=\"font-secondary\">Tanda</label>\n              <select\n                class=\"form-control form-control-sm js-select2\"\n                bind:value={tandaID}\n                on:change={buscarDisponibilidadHorario}>\n                <option value={0} disabled>- Seleccionar -</option>\n                <option value={1}>Matutina</option>\n                <option value={2}>Vespertina</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class=\"list-group list\">\n          {#if horasDisponibles.length <= 0}\n            <div class=\"alert alert-success\" role=\"alert\">\n              No hay disponibilidad en este horario\n            </div>\n          {/if}\n          {#each horasDisponibles as i}\n            <div\n              class=\"list-group-item d-flex align-items-center svelte-1nu1nbu\">\n              <div class=\"\">\n                <div class=\"name\">{i.hora}</div>\n              </div>\n              <div class=\"ml-auto\">\n                <button\n                  on:click={() => irACita(i.time)}\n                  class=\"btn btn-outline-success btn-sm\">\n                  Seleccionar\n                </button>\n              </div>\n            </div>\n          {/each}\n        </div>\n\n      </div>\n      <div class=\"modal-footer\" class:d-none={cita.estadoID == 3}>\n        <button on:click={anularCita}\n          type=\"button\" class=\"btn btn-danger\">\n          Anular cita\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { push } from \"svelte-spa-router\";\n  import { activePage, dataCita, axios, session, errorConexion, toast } from \"../../store\";\n  import { onMount } from \"svelte\";\n  import moment from 'moment';\n  import Swal from 'sweetalert2';\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n\n  $activePage = \"citas.crear\";\n\n  onMount(() => {\n    jQuery(\"#sltMedicos\").select2();\n    jQuery(\"#sltMedicos\").on(\"select2:select\", e => {\n      let data = e.params.data;\n      obj.MedicoID = data.id;\n      cargarHoras();\n    });\n\n    cargarPacientes();\n    cargarTandas();\n    cargarHoras();\n    cargarMedicos();\n  });\n\n  let data = $dataCita;\n  let obj = {\n    Observaciones: \"\",\n    Fecha: data.fechaCita || \"\",\n    MedicoID: data.medicoId,\n    PacienteID: data.pacienteId || \"\",\n    AseguradoraID: 1,\n    EstadoID: 1,\n    Nombre: \"\",\n    Apellidos: \"\",\n    Telefono: \"\",\n    Correo: \"\",\n    Sexo: '',\n    Direccion: \"\",\n    tandaID: data.tandaID,\n    hora: \"\"\n  };\n  let tandas = [];\n  let horas = [];\n  let pacientes = [];\n  let medicos = [];\n  $: faltaLaTanda = obj.tandaID == 0 || obj.tandaID == undefined;\n  let busquedaPacientes = \"\";\n\n  function cargarMedicos() {\n    $axios.get(\"/Medicos/Query\")\n    .then(res => {\n        medicos = res.data;\n        setTimeout(x => jQuery(\"#sltMedicos\").val(obj.MedicoID).trigger('change'), 10);\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarPacientes() {\n    let qs = busquedaPacientes != \"\" ? \"?keyword=\" + busquedaPacientes : \"\";\n    $axios.get(\"/Pacientes/Query\" + qs)\n    .then(res => {\n        pacientes = res.data;\n\n        if (obj.PacienteID != \"\") {\n          let select = pacientes.find(x => x.id == obj.PacienteID)\n          seleccionarPaciente(select)\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarTandas() {\n    $axios.get(\"/Tandas/GetAll\")\n    .then(res => {\n        tandas = res.data;\n        obj.tandaID = $dataCita.tandaID || 0;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarHoras() {\n    let params = \"?date=\" + obj.Fecha + \"&\" + \"tandiID=\" + obj.tandaID;\n\n    if (obj.Fecha == \"\" || obj.tandaID <= 0 || obj.MedicoID == \"\" || obj.MedicoID == 0) {\n      horas = [];\n      return;  \n    }\n\n    $axios.get(\"/Medicos/HorasDisponibles/\" + obj.MedicoID + params)\n    .then(res => {\n      horas = res.data.map(x => {\n        return {\n          time: x,\n          hora: moment(x, 'LT').format('LT')\n        }\n      });\n      obj.hora = $dataCita.hora || \"\";\n    }).catch(err => {\n      horas = [];\n      console.error(err);\n      $errorConexion()\n    })\n  }\n\n  function seleccionarPaciente(item) {\n    obj.PacienteID = item.id;\n    obj.Nombre = item.nombre;\n    obj.Apellidos = item.apellidos;\n    obj.Telefono = item.telefono;\n    obj.Direccion = item.direccion;\n    \n    jQuery('#modalPacientes').modal('hide');\n  }\n\n  function guardarPaciente() {\n    let method = ''\n\n    if (obj.PacienteID == \"\") {\n      $axios.post(\"/Pacientes\", obj)\n      .then(res => {\n        obj.PacienteID = res.data.data;\n        crearCita();\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      })\n    } else {\n      $axios.put(\"/Pacientes/\" + obj.PacienteID, obj)\n      .then(res => {\n        if (res.data.success) {\n          obj.PacienteID = res.data.data;\n          crearCita();\n        } else {\n          console.log(res);\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      })\n    }\n  }\n\n  function crearCita() {\n    obj.Fecha = obj.Fecha + \"T\" + obj.hora;\n\n    $axios.post(\"/Citas\", obj)\n    .then(res => {\n      if (res.data.success) {\n        $dataCita = {};\n        $toast(5000).fire({\n            icon: 'success',\n            title: 'La cita fue creada con exito'\n          })\n        push('/Cita/Gestionar');\n      } else {\n        console.log(res);\n        Swal.fire({\n          title: 'Error',\n          text: 'Ocurrio un error al crear la cita, intente de nuevo',\n          icon: 'error'\n        });\n      }\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    })\n  }\n</script>\n\n<style>\n  .modal-slide-right .modal-body {\n    height: 100% !important;\n    top: 0;\n    overflow: auto;\n  }\n\n  .list-group-item:nth-child(2n+1) {\n    background-color: #3e46760c;\n  }\n\n  .list-group-item {\n    border-top: none;\n    border-left: none;\n    border-right: none;\n    background-color: transparent;\n    border-radius: 0 !important;\n  }\n\n  .link-pacientes {\n    width: 100%;\n    border-radius: 5px;\n  }\n\n  .link-pacientes:hover {\n    background-color: rgba(241, 241, 241, 0.247);\n  }\n  .borde-derecho {\n    border-right: 1px solid rgb(236, 236, 236);\n  }\n  .nombre-apellido{\n    text-transform:capitalize !important\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container mt-3\">\n      <div class=\"row\">\n        <div class=\"col-lg-12 mb-5\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5>\n                <i class=\"mdi mdi-checkbox-intermediate\" />\n                Creando cita\n              </h5>\n              <div class=\"card-controls\"></div>\n            </div>\n            <div class=\"card-body\">\n              <form class=\"row\" on:submit|preventDefault={guardarPaciente}>\n                <div class=\"col-lg-5 borde-derecho\">\n                  <div class=\"col-lg-12 mt-2\" style=\"padding: 0; margin: 0;\">\n                      <button class=\"btn btn-primary btn-sm\" data-toggle=\"modal\" style=\"position: absolute; top: -30px; right: 0;\" data-target=\"#modalPacientes\" type=\"button\">\n                    <i class=\"mdi mdi-search-web\" />\n                    Buscar paciente\n                  </button>\n                  </div>\n\n                  <div class=\"form-group\">\n                    <label for=\"inpNombre\">Nombre paciente <span class=\"text-danger\">*</span> </label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"inpNombre\"\n                      bind:value={obj.Nombre} required />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"inpApellido\">Apellidos paciente <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"inpApellido\"\n                      bind:value={obj.Apellidos} required />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"inpTelefono\">Telefono / Celular <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"tel\"\n                      class=\"form-control\"\n                      id=\"inpTelefono\"\n                      bind:value={obj.Telefono} required />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"inpCorreo\">Correo electronico</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      id=\"inpCorreo\"\n                      bind:value={obj.Correo} />\n                  </div>\n                  <!-- <div class=\"form-group\">\n                    <label for=\"\">Sexo</label>\n                      <div class=\"m-b-10\">\n                        <label class=\"cstm-switch \">\n                          <input type=\"radio\" name=\"radioSexo\" class=\"cstm-switch-input\" \n                            value={'M'} bind:group={obj.Sexo} required>\n                            <span class=\"cstm-switch-indicator\"></span>\n                            <span class=\"cstm-switch-description\">Masculino</span>\n                        </label>\n                        <label class=\"cstm-switch m-l-10 \">\n                            <input type=\"radio\" name=\"radioSexo\" class=\"cstm-switch-input\"\n                            value={'F'} bind:group={obj.Sexo} required>\n                            <span class=\"cstm-switch-indicator\"></span>\n                            <span class=\"cstm-switch-description\">Femenino</span>\n                        </label>\n                      </div>\n                  </div> -->\n\n                  <div class=\"form-group \">\n                    <label class=\"font-secondary\">Direccion</label>\n                    <textarea\n                      class=\"form-control\"\n                      rows=\"3\"\n                      bind:value={obj.Direccion} />\n                  </div>\n                  <p>Los campos con un ( <span class=\"text-danger\">*</span> ) son obligatorios</p>\n\n                </div>\n                <div class=\"col-lg-7\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group\">\n                        <label for=\"Fecha\">Fecha cita</label>\n                        <input\n                          type=\"date\"\n                          class=\"form-control mb-2\"\n                          id=\"Fecha\"\n                          bind:value={obj.Fecha} on:change={() => {\n                            cargarHoras();\n                          }} required/>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group \">\n                        <label class=\"font-secondary\">Tanda</label>\n                        <select class=\"form-control\"\n                          bind:value={obj.tandaID} on:change={cargarHoras} required>\n                          <option value={0} disabled selected>- Seleccionar -</option>\n                          {#each tandas as item}\n                          <option value={item.id}>{item.nombre}</option>\n                          {/each}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group \">\n                        <label class=\"font-secondary\">Médico</label>\n                        <select class=\"form-control js-select2\" id=\"sltMedicos\" \n                            disabled={faltaLaTanda} bind:value={obj.MedicoID} required>\n                          <option value={0} disabled selected>- Seleccionar -</option>\n                          {#each medicos as item}\n                          <option value={item.id}>{item.name}</option>\n                          {/each}\n                        </select>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-6\">\n                      <div class=\"form-group\">\n                        <label class=\"font-secondary\">Hora</label>\n                        <select class=\"form-control\" bind:value={obj.hora}\n                          disabled={faltaLaTanda} required>\n                          <option value={\"\"} disabled selected>- Seleccionar -</option>\n                          {#each horas as item}\n                          <option value={item.time}>{item.hora}</option>\n                          {/each}\n                        </select>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-12\">\n                      <div class=\"form-group \">\n                        <label class=\"font-secondary\">Ubicaci&oacute;n del M&eacute;dico en el centro</label>\n                        <input type=\"text\" class=\"form-control\" readonly value={$dataCita.ubicacion || \"\"}>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-12\">\n                      <div class=\"form-group \">\n                        <label class=\"font-secondary\">Observaciones</label>\n                        <textarea class=\"form-control\" rows=\"5\" bind:value={obj.Observaciones}/>\n                      </div>\n                    </div>\n                    <div class=\"col-lg-12 p-t-80\" style=\"text-align: right;\">\n                      <button type=\"submit\" class=\"btn btn-success\" style=\"position: fixed; height: 50px; width: 50px; border-radius: 50%; right: 40px; bottom: 40px;\" title=\"Guardar\">\n                        <i class=\"mdi mdi-content-save-outline\" style=\"font-size: 23px;\"/>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</main>\n\n<!-- Modal -->\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalPacientes\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalPacientes\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalPacientes\">Buscar pacientes</h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n\n        <div class=\"input-group input-group-flush mb-3\">\n          <input\n            type=\"search\"\n            class=\"form-control form-control-appended\"\n            placeholder=\"Buscar\"\n            bind:value={busquedaPacientes} on:input={cargarPacientes}/>\n          <div class=\"input-group-append\">\n            <div class=\" input-group-text\">\n              <span class=\"mdi mdi-magnify\" />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"list-group list \">\n          {#each pacientes as i}\n          <div\n            style=\"cursor:pointer;\"\n            class=\"list-group-item d-flex align-items-center link-pacientes\"\n            on:click={seleccionarPaciente(i)}>\n            <div class=\"row\">\n              <div class=\"text-primary\">\n                <div class=\"name\">\n                  <span class=\"nombre-apellido\" style=\"font-weight: bold;\">{i.nombre} {i.apellidos}</span>\n                  »\n                  <span>Tel.: {i.telefono}</span>\n                  »\n                  <span>ID: {i.cedula || '\\\"Ningulo\\\"'}</span>\n                </div>\n                <div class=\"text-muted\">\n                  {i.direccion}\n                </div>\n              </div>\n            </div>\n          </div>\n          {/each}\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <div class=\"row text-center p-b-5\">\n          <div class=\"col\">\n            <a href=\"#!\" class=\"btn btn-secondary\" data-dismiss=\"modal\">\n              Cerrar\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { push } from \"svelte-spa-router\";\n  import { onMount } from \"svelte\";\n  import { activePage, dataCita, axios, session, errorConexion } from \"../../store\";\n  import moment from 'moment';\n  import Swal from 'sweetalert2';\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n\n  let ubicacion = \"\";\n  let dia = -1;\n  let especialidades = [];\n  let listado = [];\n  let tandas = [];\n  let horasDisponibles = [];\n\n  let filter = {\n    Nombre: \"\",\n    PerfilID: 0,\n    FechaCita: \"\",\n    TandaID: 0\n  }\n  let filterCita = {\n    MedicoId: \"\",\n    FechaCita: \"\",\n    TandaID: 0\n  }\n  if ($activePage == 'citas.crear') {\n    limpiarFiltro();\n  }\n\n  $activePage = \"gestor\"\n\n  onMount(() => {\n    if ($dataCita.fechaCita != undefined) {\n      filter.FechaCita = $dataCita.fechaCita;\n      filter.TandaID = $dataCita.tandaID\n    }\n\n    jQuery(\"#sltEspecialidad\").select2();\n    jQuery(\"#sltEspecialidad\").on(\"select2:select\", e => {\n      let data = e.params.data;\n      filter.PerfilID = parseInt(data.id);\n      filtrar('general');\n    });\n\n    marcarFecha();\n    cargarMedicos();\n    cargarEspecialidades();\n    cargarTandas();\n  });\n\n  function cargarMedicos() {\n    var qs = new URLSearchParams(filter).toString()\n    $axios.get(\"/Medicos/Query?\" + qs)\n    .then(res => {\n      listado = res.data;\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    });\n  }\n  function cargarEspecialidades() {\n    $axios.get(\"/Perfiles/GetAll\")\n    .then(res => {\n      especialidades = res.data;\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    });\n  }\n  function cargarTandas() {\n    $axios.get(\"/Tandas/GetAll\")\n    .then(res => {\n      tandas = res.data;\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    });\n  }\n  function buscarDisponibilidadHorario(idMedico) {\n    if (typeof idMedico === 'string') {\n      filterCita.MedicoId = idMedico;\n    }\n\n    if (filterCita.FechaCita == \"\") {\n      horasDisponibles = [];\n      return;\n    }\n\n    let params = \"date=\" + filterCita.FechaCita + \"&\" + \"tandiId=\" + filterCita.TandaID;\n    $axios.get(\"/Medicos/HorasDisponibles/\" + filterCita.MedicoId + \"?\" + params)\n    .then(res => {\n      horasDisponibles = res.data.map(e => {\n        return {\n          time : e,\n          hora : moment(e, 'LT').format('LT')\n        }\n      });\n    }).catch(err => {\n      horasDisponibles = [];\n      console.error(err);\n      $errorConexion()\n    })\n  }\n\n  function elegirTiempo(e) {\n    let countDia = parseInt(e.target.value);\n    let date = moment();\n    date.add(moment.duration(countDia, 'd'));\n\n    filter.FechaCita = date.format('YYYY-MM-DD');\n    cargarMedicos();\n  }\n  function crearCita(item) {\n    ubicacion = item.ubicacion;\n    filterCita.TandaID = filter.TandaID;\n    filterCita.FechaCita = filter.FechaCita || moment().format('YYYY-MM-DD');\n    buscarDisponibilidadHorario(item.id)\n\n    jQuery('#modalCrearCita').modal('show')\n  }\n  function irACita(time) {\n    $dataCita = {\n      fechaCita: filterCita.FechaCita,\n      tandaID: filterCita.TandaID,\n      hora: time,\n      medicoId: filterCita.MedicoId,\n      pacienteId: \"\",\n      ubicacion: ubicacion\n    };\n    push('/Cita/Crear');\n  }\n  function irAlPerfil(id) {\n    $dataCita = {\n      fechaCita: filter.FechaCita,\n      tandaID: filter.TandaID,\n      hora: \"\",\n      medicoId: id,\n      pacienteId: \"\"\n    };\n    push('/Medico/Perfil/' + id);\n  }\n  function filtrar(tipo) {\n    if (tipo == 'limpiar') {\n      dia = -1;\n    }\n    if (tipo == 'fecha') {\n      marcarFecha()\n    }\n\n    cargarMedicos();\n  }\n  function marcarFecha() {\n    if (filter.FechaCita == moment().format('YYYY-MM-DD')) {\n      dia = 0;\n    } else if (filter.FechaCita == moment().add(moment.duration(1, 'd')).format('YYYY-MM-DD')) {\n      dia = 1;\n    } else if (filter.FechaCita == moment().add(moment.duration(2, 'd')).format('YYYY-MM-DD')) {\n      dia = 2;\n    } else {\n      dia = -1;\n    }\n  }\n  function limpiarFiltro() {\n    filter.Nombre = \"\";\n    filter.PerfilID = 0;\n    filter.FechaCita = \"\";\n    filter.TandaID = 0;\n    $dataCita = {}\n\n    jQuery(\"#sltEspecialidad\").val(0).trigger('change');\n    filtrar('limpiar');\n  }\n</script>\n\n<style>\n  .option-box label:after,\n  .option-box label:before {\n    top: 0;\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container-fluid mt-3\">\n      <h4>Gestión de citas</h4>\n      <div class=\"row\">\n        <div class=\"col-lg-4\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"form-group \">\n                <label class=\"font-secondary\">Médico</label>\n                <input type=\"text\" class=\"form-control\" bind:value={filter.Nombre} on:input={() => filtrar('medico')} />\n              </div>\n              <div class=\"form-group \">\n                <label class=\"font-secondary\">Especialidad</label>\n                <select class=\"form-control select2\" style=\"width: 100%;\" id=\"sltEspecialidad\"\n                  bind:value={filter.PerfilID} on:change={() => filtrar('especialidad')}>\n                  <option value={0}>Todas</option>\n                  {#each especialidades as item}\n                  <option value={item.id}>{item.nombre}</option>\n                  {/each}\n                </select>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"inputAddress2\">Fecha</label>\n                <input\n                  type=\"date\"\n                  class=\"form-control mb-2\"\n                  id=\"inputAddress2\" \n                  bind:value={filter.FechaCita} on:input={() => filtrar('fecha')}/>\n\n                <div class=\"contenedor-dias\">\n                  <div class=\"option-box\">\n                    <input id=\"radio-new1\" name=\"tiempo\" type=\"radio\" \n                      value={0} on:change={elegirTiempo} bind:group={dia} />\n                    <label\n                      for=\"radio-new1\"\n                      style=\"height: 40px; padding: 3px 10px;\">\n                      <span class=\"radio-content\">\n                        <span class=\"h6 d-block\">Hoy</span>\n                      </span>\n                    </label>\n                  </div>\n                  <div class=\"option-box\">\n                    <input id=\"radio-new2\" name=\"tiempo\" type=\"radio\" \n                      value={1} on:change={elegirTiempo} bind:group={dia} />\n                    <label\n                      for=\"radio-new2\"\n                      style=\"height: 40px; padding: 3px 10px;\">\n                      <span class=\"radio-content\">\n                        <span class=\"h6 d-block\">Mañana</span>\n                      </span>\n                    </label>\n                  </div>\n                  <div class=\"option-box\">\n                    <input id=\"radio-new3\" name=\"tiempo\" type=\"radio\" \n                      value={2} on:change={elegirTiempo} bind:group={dia} />\n                    <label\n                      for=\"radio-new3\"\n                      style=\"height: 40px; padding: 3px 10px;\">\n                      <span class=\"radio-content\">\n                        <span class=\"h6 d-block\">En dos días</span>\n                      </span>\n                    </label>\n                  </div>\n                </div>\n\n              </div>\n\n              <div class=\"form-group \">\n                <label class=\"font-secondary\">Tanda</label>\n                <select class=\"form-control\" bind:value={filter.TandaID} \n                  on:change={() => filtrar('tanda')}>\n                  <option value={0} selected>Todas</option>\n                  {#each tandas as item}\n                  <option value={item.id}>{item.nombre}</option>\n                  {/each}\n                </select>\n              </div>\n              <button on:click={limpiarFiltro} class=\"btn btn-secondary btn-block\">Limpiar</button>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-lg-8\">\n          <div class=\"table-responsive\">\n            <table class=\"table align-td-middle table-card\">\n              <thead>\n                <tr>\n                  <th />\n                  <th>Nombre</th>\n                  <th>Especialidad</th>\n                  <th>Telefono</th>\n                  <th />\n                </tr>\n              </thead>\n              <tbody>\n                {#each listado as item}\n                  <!-- content here -->\n                  <tr>\n                    <td>\n                      <div class=\"avatar avatar-sm \">\n                        <img\n                          src=\"assets/img/products/item%20(1).jpg\"\n                          class=\"avatar-img avatar-sm rounded-circle\"\n                          alt=\"\" />\n                      </div>\n                    </td>\n                    <td>{item.name}</td>\n                    <td>{item.perfil}</td>\n                    <td>{item.phoneNumber}</td>\n                    <td style=\"text-align: right;\">\n                      <button class=\"btn btn-outline-primary btn-sm\"\n                        on:click={() => irAlPerfil(item.id)}>\n                        <i class=\"mdi mdi-contacts\" />\n                        Perfil\n                      </button>\n                      <button class=\"btn btn-outline-success btn-sm\" \n                        on:click={() => crearCita(item)}>\n                        <i class=\"mdi mdi-calendar-plus\" />\n                        Crear cita\n                      </button>\n                    </td>\n                  </tr>\n                {/each}\n              </tbody>\n            </table>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</main>\n\n\n\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalCrearCita\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalCrearCitaLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\" >\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalCrearCitaLabel\">\n          <i class=\"mdi mdi-calendar-plus\"></i>\n          Crear cita\n        </h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" style=\"height: 100%; top: 0; overflow: auto;\">\n\n        <div class=\"row\">\n          <div class=\"col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"inputAddress\">Fecha</label> \n              <input type=\"date\" class=\"form-control form-control-sm\"\n                bind:value={filterCita.FechaCita} on:change={buscarDisponibilidadHorario}>\n            </div>\n          </div> \n          <div class=\"col-lg-6\">\n            <div class=\"form-group \">\n              <label class=\"font-secondary\">Tanda</label>\n              <select class=\"form-control form-control-sm\"\n                bind:value={filterCita.TandaID} on:change={buscarDisponibilidadHorario}>\n                <option value={0} disabled>- Seleccionar -</option>\n                {#each tandas as i}\n                <option value={i.id}>{i.nombre}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n        </div>  \n        <div class=\"list-group list\">\n          {#if horasDisponibles.length <= 0}\n            <div class=\"alert alert-success\" role=\"alert\">\n              No hay disponibilidad con este horario\n            </div>\n          {/if}\n          {#each horasDisponibles as i}\n          <div class=\"list-group-item d-flex align-items-center svelte-1nu1nbu\">\n            <div class=\"\">\n              <div class=\"name\">{i.hora}</div>\n            </div>\n            <div class=\"ml-auto\">\n              <button class=\"btn btn-outline-success btn-sm\"\n                on:click={() => irACita(i.time)}>Seleccionar</button>\n            </div>\n          </div>\n          {/each}\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { connection, activePage, session, axios, errorConexion, toast } from \"../../store.js\";\n  import { UserManager } from \"../../util.js\";\n  import { onMount } from \"svelte\";\n  import { push } from \"svelte-spa-router\";\n  import moment from \"moment\";\n  import Swal from 'sweetalert2';\n  \n  let user = {};\n  user = new UserManager($session.authorizationHeader.Authorization)\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n  $activePage = \"espacioMedico\";\n\n  let citaPacienteActual = {};\n  let paciente = {};\n  let envioPacienteActual = \"\";\n  let pacienteSeleccionado = \"\";\n  let citas = [];\n\n  onMount(() => {\n    cargarPacientesActivos()\n    buscarPacientePendiente();\n  })\n\n  $connection.on(\"RecibirPaciente\", (pacienteID, tipo) => {\n    cargarPacientesActivos();\n    if (tipo == \"asignar\") {\n      envioPacienteActual = pacienteID || \"\"\n      getPaciente(envioPacienteActual, 'asistente')\n    }\n  });\n\n  function cargarPacientesActivos() {\n    $axios.get('/Medicos/' + user.nameid + \"/PacientesActivos\")\n    .then(res => {\n      citas = res.data.filter (e =>\n        moment(e.fecha).format(\"YYYY-MM-DD\") == moment().format(\"YYYY-MM-DD\")\n      );\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    })\n  }\n  function getPaciente(id, via) {\n    if (id == \"\") {\n      return\n    }\n\n    $axios.get(\"/Pacientes/\" + id)\n      .then(res => {\n        if (via == 'asistente' || via == 'carga') {\n          citaPacienteActual = citas.find(x => x.pacienteID == envioPacienteActual)\n          if (citas.some(x => x.pacienteID == envioPacienteActual)) {\n            paciente = res.data;\n            pacienteSeleccionado = paciente.id\n          }\n        }\n        if (via == 'seleccion') {\n          paciente = res.data;\n          pacienteSeleccionado = paciente.id\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function terminarCita() {\n    if (Object.entries(citaPacienteActual).length > 0 && citaPacienteActual != undefined) {\n      citaPacienteActual.inactivo = true;\n      citaPacienteActual.estadoID = 3;\n      $axios.put(\"/Citas/\" + citaPacienteActual.id, citaPacienteActual)\n      .then(res => {\n        if (res.data.success) {\n          citaPacienteActual = {}\n          paciente = {}\n          envioPacienteActual = \"\";\n          cargarPacientesActivos();\n\n          $connection.invoke(\"EnviarAvisoDelPaciente\", user.nameid, \"\")\n            .catch(err => console.error(err));\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n    }\n  }\n  function cambiarDePaciente(id) {\n    Swal.fire({\n      title: 'Cambio de paciente',\n      text: \"Estas seguro que deseas cambiar de paciente?\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      cancelButtonText: 'No',\n      confirmButtonText: 'Si'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        $axios.post(\"/Medicos/\" + user.nameid + \"/AsignarPaciente?pacienteId=\" + id)\n        .then(res => {\n          if (!res.data.errors) {\n            envioPacienteActual = id;\n            citaPacienteActual = citas.find(x => x.pacienteID == id)\n            $connection.invoke(\"EnviarAvisoDelPaciente\", user.nameid, id)\n            .catch(err => console.error(err));\n\n            $toast(5000).fire({\n              icon: 'success',\n              title: 'Cambio realizado con exito'\n            })\n          } else {\n            Swal.fire({\n              title: 'Error',\n              text: 'Problema al cambiar paciente',\n              icon: 'error'\n            });\n          }\n\n        }).catch(err => {\n          console.error(err);\n          $errorConexion()\n        });\n      }\n    })\n  }\n\n  function buscarPacientePendiente() {\n    $axios.get(\"/Medicos/\" + user.nameid + \"/PacientePendiente\")\n      .then(res => {\n        envioPacienteActual = res.data.data;\n        getPaciente(envioPacienteActual, 'carga')\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n</script>\n\n<style>\n  .list-group-item {\n    border-radius: 0 !important;\n  }\n  .list-group-item:last-child {\n    border-bottom: none;\n  }\n  .list-group-item.activo {\n    background-color: #687ae8;\n    color: white;\n    border-radius: 3px !important;\n  }\n  .list-group-item.activo .text-muted {\n    color: white !important;\n  }\n  .active-select{\n    background-color: rgba(216, 216, 216, 0.205);\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container mt-3\">\n      <div class=\"row\">\n        <div class=\"col-lg-12 mb-3\" style=\"text-align: right;\">\n          <!-- <button type=\"submit\" class=\"btn btn-primary\">\n            <i class=\"mdi mdi-bell-ring-outline\" />\n            Llamar asistente\n          </button> -->\n          <button class:d-none={envioPacienteActual == \"\" || citaPacienteActual == undefined} \n            class=\"btn btn-success\" on:click={terminarCita}>\n            <i class=\"mdi mdi-check-all\" />\n            Terminar cita\n          </button>\n        </div>\n        <div class=\"col-lg-5\">\n          <div class=\"card m-b-20 card-vnc svelte-1e95eny\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">Lista de citas</h5>\n            </div>\n            <div class=\"card-body\">\n              <div class=\"list-group list \">\n                {#each citas as item}\n                <div\n                  class=\"list-group-item d-flex align-items-center\n                  link-pacientes svelte-1p1f2vm active-select\" \n                  class:activo={envioPacienteActual == item.pacienteID}\n                  class:active-select={pacienteSeleccionado == item.pacienteID}\n                  style=\"cursor: pointer;\"\n                  on:click={() => { getPaciente(item.pacienteID, 'seleccion') }}\n                  on:dblclick={() => cambiarDePaciente(item.pacienteID)}>\n                  <div class=\"row\">\n                    <div class=\"\">\n                      <div class=\"name\">\n                        <span style=\"font-weight: bold;\">{item.nombrePaciente}</span>\n                        »\n                        <span>Ced.: {item.cedula || \"\"}</span>\n                      </div>\n                      <div class=\"text-muted\">{item.observaciones}</div>\n                    </div>\n                  </div>\n                </div>\n                {/each}\n\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-lg-7\">\n          <div class=\"card m-b-30\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">Paciente actual</h5>\n            </div>\n            <div class=\"card-body \">\n              <form id=\"frmPaciente\">\n                <input type=\"hidden\" name=\"IdUser\" value=\"0\" />\n                <div class=\"row\">\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Nombre</label>\n                    <input\n                      value={paciente.nombre || \"\"}\n                      type=\"name\"\n                      class=\"form-control\"\n                      readonly\n                      name=\"Name\"\n                      maxlength=\"200\" />\n                  </div>\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Apellido</label>\n                    <input\n                      value={paciente.apellidos || \"\"}\n                      type=\"name\"\n                      class=\"form-control\"\n                      readonly\n                      name=\"Name\"\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Cedula</label>\n                    <input\n                      type=\"name\"\n                      class=\"form-control\"\n                      readonly\n                      value={paciente.cedula || \"\"}\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Telefono</label>\n                    <input\n                      value={paciente.telefono || \"\"}\n                      type=\"tel\"\n                      class=\"form-control\"\n                      readonly\n                      name=\"Name\"\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-12\">\n                    <label for=\"\">Correo electronico</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      readonly\n                      value={paciente.correo || \"\"}\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Aseguradora</label>\n                    <input\n                      value={paciente.nombreAseguradora || \"\"}\n                      type=\"email\"\n                      class=\"form-control\"\n                      readonly\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">No. Seguro</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      readonly\n                      maxlength=\"200\"\n                      value={paciente.noAfiliado || \"\"} />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Pais</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      readonly\n                      value={paciente.nacionalidad || \"\"}\n                      maxlength=\"200\" />\n                  </div>\n\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"\">Provincia</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      readonly\n                      maxlength=\"200\" \n                      value={paciente.provincia || \"\"}/>\n                  </div>\n\n                  <div class=\"form-group col-md-12\">\n                    <label for=\"\">Direccion</label>\n                    <textarea\n                      class=\"form-control\"\n                      rows=\"2\"\n                      readonly\n                      value={paciente.direccion || \"\"} />\n                  </div>\n\n                  <div class=\"form-group col-md-12\">\n                    <label for=\"\">Observaciones</label>\n                    <textarea\n                      value={paciente.observaciones || \"\"}\n                      class=\"form-control\"\n                      rows=\"3\"\n                      name=\"Observaciones\" />\n                  </div>\n                  <br />\n\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </section>\n</main>\n",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import DiaSemana from \"../../Components/DiaSemana.svelte\";\n  import { push } from \"svelte-spa-router\";\n  import { activePage, dataCita, axios, session, errorConexion, toast } from \"../../store\";\n  import { UserManager } from \"../../util.js\";\n  import { onMount } from \"svelte\";\n  import moment from 'moment';\n  // import Swal from 'sweetalert2';\n\n  let user = new UserManager($session.authorizationHeader.Authorization)\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n\n  $activePage = \"mantenimiento.peril\";\n  export let params = {};\n  let id = params.id;\n  let data = $dataCita;\n\n  let detail = {\n    medicoID: \"\",\n    name: \"\",\n    email: \"\",\n    perfil: \"\",\n    phoneNumber: \"\",\n    ubicacion: \"\"\n  };\n  let obj = {\n    medicoID: \"\",\n    name: \"\",\n    email: \"\",\n    perfilID: 0,\n    phoneNumber: \"\",\n    ubicacion: \"\"\n  };\n  \n  let prefijos = [\n    {value: 'Dr', name: 'Dr.'},\n    {value: 'Dra', name: 'Dra.'},\n    {value: 'Lic', name: 'Lic.'},\n    {value: 'Lida', name: 'Lida.'},\n    {value: 'Sr', name: 'Sr.'},\n    {value: 'Sra', name: 'Sra.'},\n  ]\n\n  let fecha = \"\";\n  let fechaBusquedaCita = \"\";\n  let tandaID = 0;\n  let perfiles = [];\n  let horarios = [];\n  let tandas = [];\n  let horasDisponibles = [];\n  let citas = [];\n  let citasDB = [];\n  let btnFechaDisponibilidad = 'h';\n  let btnFechaCita = '';\n  let cambioHorarioPermitido = false;\n\n  let diasSemana = [\n    {check: false, dia: 1, nombre: 'Lunes'},\n    {check: false, dia: 2, nombre: 'Martes'},\n    {check: false, dia: 3, nombre: 'Miercoles'},\n    {check: false, dia: 4, nombre: 'Jueves'},\n    {check: false, dia: 5, nombre: 'Viernes'},\n    {check: false, dia: 6, nombre: 'Sabado'},\n    {check: false, dia: 7, nombre: 'Domingo'},\n  ];\n\n  onMount(() => {\n    btnFechaCita = 's';\n\n    if ($dataCita.fechaCita == \"\" || $dataCita.fechaCita == undefined) {\n      fecha = moment().format('YYYY-MM-DD');\n      tandaID = 1;\n    } else {\n      fecha = $dataCita.fechaCita;\n      tandaID = $dataCita.tandaID\n    }\n\n    cargarMedicosDelAsistente();\n    cargarDetalle();\n    buscarDisponibilidadHorario();\n    cargarHorarios();\n    cargarTandas();\n    cargarCitas();\n    cargarPerfiles();\n  });\n\n  function cargarMedicosDelAsistente() {\n    $axios.get(\"/MedicosAsistentes/\" + user.nameid + \"/Medicos\")\n    .then(res => {\n        cambioHorarioPermitido = res.data.some(x => x.medicoID == id);\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarDetalle() {\n    $axios.get(\"/Medicos/\" + id)\n    .then(res => {\n        detail = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarTandas() {\n    $axios.get(\"/Tandas/GetAll\")\n    .then(res => {\n        tandas = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarHorarios() {\n    $axios.get(\"/Medicos/Horarios/\" + id)\n    .then(res => {\n        horarios = res.data;\n\n        diasSemana = diasSemana.map(e => {\n          return {\n            check: horarios.some(i => i.dia == e.dia && !i.inactivo),\n            dia: e.dia,\n            nombre: e.nombre\n          }\n        });\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarCitas() {\n    $axios.get(\"/Medicos/Citas/\" + id)\n    .then(res => {\n        let datos = res.data.map(x => {\n          return {\n            fecha: moment(x.fecha).format('LL'),\n            hora: moment(x.fecha).format('LT'),\n            observaciones: x.observaciones,\n            nombrePaciente: x.nombrePaciente\n          }\n        });\n        let diasUnicos = [...new Set( datos.map(e => { return e.fecha }) )];\n        diasUnicos.sort()\n\n        citasDB = diasUnicos.map(e => {\n          let horas = datos.filter(i => i.fecha == e).map(e => {\n            return {\n              hora:  moment(e.hora, 'LT'),\n              nombrePaciente: e.nombrePaciente,\n              observaciones: e.observaciones\n            }\n          });\n\n          return {\n            fecha: e,\n            horas: horas.sort((e, i)=> e.hora - i.hora ).map(x => {\n              return {\n                hora : moment(x.hora).format('LT'),\n                nombrePaciente: x.nombrePaciente,\n                observaciones: x.observaciones\n              }\n            })\n          }\n        })\n        citas = citasDB;\n        buscarCitas('s');\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarPerfiles() {\n    $axios.get(\"/Perfiles/GetAll\")\n    .then(res => {\n        perfiles = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n\n  function buscarDisponibilidadHorario() {\n    if (fecha == \"\" || tandaID <= 0) {\n      horasDisponibles = [];\n      return;\n    }\n\n    if (fecha == moment().format('YYYY-MM-DD')) {\n      btnFechaDisponibilidad = 'h';\n    } else if (fecha == moment().add(moment.duration(1, 'd')).format('YYYY-MM-DD')) {\n      btnFechaDisponibilidad = 'm';\n    } else {\n      btnFechaDisponibilidad = ''\n    }\n\n    let params = \"date=\" + fecha + \"&\" + \"tandiId=\" + tandaID;\n    $axios.get(\"/Medicos/HorasDisponibles/\" + id + \"?\" + params)\n    .then(res => {\n      horasDisponibles = res.data.map(e => {\n        return {\n          time : e,\n          hora : moment(e, 'LT').format('LT')\n        } \n      });\n    }).catch(err => {\n      horasDisponibles = [];\n      console.error(err); \n      $errorConexion()\n    })\n  }\n\n  function crearCita(hora) {\n    $dataCita = {\n      fechaCita: fecha,\n      tandaID: tandaID,\n      hora: hora,\n      medicoId: id,\n      ubicacion: detail.ubicacion\n    };\n    push('/Cita/Crear/');\n  }\n\n  function diaSiguiente(params) {\n    fecha = moment().add(moment.duration(1, 'd')).format('YYYY-MM-DD');\n    btnFechaDisponibilidad = 'm';\n\n    buscarDisponibilidadHorario();\n  }\n  function diaDeHoy(params) {\n    fecha = moment().format('YYYY-MM-DD');\n    btnFechaDisponibilidad = 'h';\n\n    buscarDisponibilidadHorario();\n  }\n  function buscarCitas(tipo) {\n    let hoy = moment();\n    btnFechaCita = tipo;\n\n    if (tipo == 'h') {\n      fechaBusquedaCita = hoy.format('YYYY-MM-DD');\n      citas = citasDB.filter(e => e.fecha == hoy.format('LL'));\n    } else if (tipo == 'm') {\n      hoy.add(moment.duration(1, 'd'));\n      fechaBusquedaCita = hoy.format('YYYY-MM-DD')\n      citas = citasDB.filter(e => e.fecha == hoy.format('LL'));\n    } else if (tipo == 's') {\n      fechaBusquedaCita = ''\n      citas = citasDB.filter(e => moment(e.fecha).format('W') == hoy.format('W'));\n    } else {\n      if (fechaBusquedaCita == hoy.format('YYYY-MM-DD')) {\n        btnFechaCita = 'h';\n      } else if (fechaBusquedaCita == hoy.add(moment.duration(1, 'd')).format('YYYY-MM-DD')) {\n        btnFechaCita = 'm';\n      } else if (moment(fechaBusquedaCita).format('W') == hoy.format('W')) {\n        btnFechaCita = 's'\n      } else {\n        btnFechaCita = ''\n      }\n\n      citas = citasDB.filter(e => e.fecha == moment(fechaBusquedaCita).format('LL'));\n    }\n  }\n\n  function editar() {\n    $axios.get(\"/Users/\" + id)\n    .then(res => {\n      obj = res.data;\n      jQuery('#modalUsuario').modal('show');\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    });\n  }\n  function guardar() {\n    $axios.put(\"/Users/\" + id, obj)\n    .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Medico actualizado con exito'\n          })\n          jQuery('#modalUsuario').modal('hide');\n          cargarDetalle();\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n\n</script>\n\n<style>\n  .list-group-item:nth-child(2n+1) {\n    background-color: #3e46760c;\n  }\n  .list-group-item {\n    padding: 5px 5px 5px 10px;\n    border-right: 0;\n    border-left: 0;\n    border-radius: 0;\n  }\n  .list-group-item:first-child {\n    border-top: none;\n  }\n  .list-group-item:last-child {\n    border-bottom: none;\n  }\n  .card.card-vnc {\n    box-shadow: none;\n    border: #687ae8 solid 1px;\n  }\n  .btn-primary, .btn-write {\n    border: 1px solid #d3e0e9;\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container mt-3\">\n      <h5 class=\"pt-2 pb-2\">Perfil Medico</h5>\n      <div class=\"row list\">\n        <div class=\"col-sm-12 col-lg-4\">\n          <div class=\"card m-b-30\">\n            <div class=\"card-header\" />\n            <div class=\"card-body\">\n              <div class=\"text-center\">\n                <div>\n                  <div class=\"avatar avatar-xl avatar-online\">\n                    <img\n                      class=\"avatar-img rounded-circle\"\n                      src=\"assets/img/users/user-5.jpg\"\n                      alt=\"name\" />\n                  </div>\n                </div>\n                <h3 class=\"p-t-10 searchBy-name\">{detail.prefix} {detail.name}</h3>\n              </div>\n              <div class=\"text-muted text-center\">\n                {detail.perfil || \"\"}\n              </div>\n              <p class=\"text-muted text-center\" style=\"margin-bottom: 0;\">\n                {detail.email}\n              </p>\n              <p class=\"text-muted text-center\" style=\"margin-bottom: 0;\">\n                {detail.ubicacion || \"\"}\n              </p>\n              <p class=\"text-muted text-center\">{detail.phoneNumber}</p>\n              <div class=\"row text-center p-b-10\">\n                <div class=\"col\">\n                  <a\n                    href=\"#!\"\n                    on:click|preventDefault={() => {\n                      document\n                        .querySelector('.horarioEspecialista')\n                        .scrollIntoView({\n                          behavior: 'smooth',\n                          block: 'center'\n                        });\n                    }}>\n                    <h3 class=\"mdi mdi-timetable\"> </h3>\n                    <div class=\"text-overline\">Horario</div>\n\n                  </a>\n                </div>\n                <div class=\"col\">\n                  <a href=\"#/\" on:click|preventDefault={editar}>\n                    <h3 class=\"mdi mdi-account-edit\"> </h3>\n                    <div class=\"text-overline\">Editar Perfil</div>\n                  </a>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-sm-12 col-md-12 col-lg-8\">\n          <div class=\"card m-b-30\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">\n                <i class=\"mdi mdi-calendar-search\" />\n                Disponibilidad\n              </h5>\n              <div class=\"card-controls\">\n                <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                  <button type=\"button\" class:btn-primary={btnFechaDisponibilidad == 'h'} \n                    class:btn-write={btnFechaDisponibilidad != 'h'} class=\"btn shadow-none btn-sm\" \n                    on:click={diaDeHoy}>\n                    <i class=\"mdi mdi-calendar\" />\n                    Hoy\n                  </button>\n                  <button type=\"button\" class:btn-primary={btnFechaDisponibilidad == 'm'}\n                    class:btn-write={!btnFechaDisponibilidad != 'm'} class=\"btn shadow-none btn-sm\"\n                    on:click={diaSiguiente}>\n                    Mañana\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"card-body\">\n\n              <div class=\"row\">\n                <div class=\"col-lg-6\">\n                  <div class=\"form-group\">\n                    <label for=\"inputAddress\">Fecha</label>\n                    <input type=\"date\" class=\"form-control form-control-sm\"\n                      bind:value={fecha} on:input={buscarDisponibilidadHorario}/>\n                  </div>\n                </div>\n                <div class=\"col-lg-6\">\n                  <div class=\"form-group \">\n                    <label class=\"font-secondary\">Tanda</label>\n                    <select class=\"form-control form-control-sm js-select2\"\n                      bind:value={tandaID} on:change={buscarDisponibilidadHorario}>\n                      <option value=\"0\" disabled selected>- Seleccionar -</option>\n                      {#each tandas as i}\n                      <option value={i.id}>{i.nombre}</option>\n                      {/each}\n                    </select>\n                  </div>\n                </div>\n              </div>\n              {#if horasDisponibles.length <= 0}\n              <div class=\"alert alert-success\" role=\"alert\">\n                No hay disponibilidad con este horario\n              </div>\n              {/if}\n\n              <div class=\"list-group list\">\n                {#each horasDisponibles as item}\n                <div class=\"list-group-item d-flex align-items-center\">\n                  <div class=\"\">\n                    <div class=\"name\">{item.hora}</div>\n                  </div>\n                  <div class=\"ml-auto\">\n                    <button\n                      class=\"btn btn-outline-success btn-sm\"\n                      on:click={crearCita(item.time)}>\n                      <i class=\"mdi mdi-calendar-plus\"></i>\n                      Crear cita\n                    </button>\n                  </div>\n                </div>\n                {/each}\n              </div>\n\n            </div>\n          </div>\n\n        </div>\n\n        <div class=\"col-lg-12\">\n          <div class=\"card m-b-30\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">\n                <i class=\"mdi mdi-calendar-multiselect\" />\n                Citas programadas\n              </h5>\n              <div class=\"card-controls\">\n\n                <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                  <input type=\"date\" class=\"form-control form-control-sm\"\n                    bind:value={fechaBusquedaCita} on:change={() => buscarCitas('f')}/>\n                  <button\n                    type=\"button\"\n                    class:btn-primary={btnFechaCita == 'h'} class:btn-write={btnFechaCita != 'h'}\n                    class=\"btn shadow-none btn-sm\"\n                    on:click={() => buscarCitas('h')}>\n                    Hoy\n                  </button>\n                  <button\n                    type=\"button\"\n                    class:btn-primary={btnFechaCita == 'm'} class:btn-write={btnFechaCita != 'm'}\n                    class=\"btn shadow-none btn-sm\"\n                    on:click={() => buscarCitas('m')}>\n                    Mañana\n                  </button>\n                  <button\n                    type=\"button\"\n                    class:btn-primary={btnFechaCita == 's'} class:btn-write={btnFechaCita != 's'}\n                    class=\"btn shadow-none btn-sm\"\n                    on:click={() => buscarCitas('s')}>\n                    Semana\n                  </button>\n                </div>\n\n              </div>\n            </div>\n            <div class=\"card-body\">\n              {#if citas.length == 0}\n              <div class=\"alert alert-success\" role=\"alert\">\n                No hay citas programadas para este dia\n              </div>\n              {/if}\n\n              <div class=\"row\">\n                {#each citas as i}\n                <div class=\"col-lg-6\">\n                  <div class=\"card m-b-20 card-vnc\">\n                    <div class=\"card-header\">\n                      <h5 class=\"m-b-0\">{i.fecha}</h5>\n                    </div>\n                    <div class=\"card-body\">\n    \n                      <div class=\"list-group list \">\n                        {#each i.horas as h}\n                        <div class=\"list-group-item d-flex align-items-center\">\n                          <div class=\"\">\n                            <div class=\"name text-primary\">\n                              {h.nombrePaciente}\n                            </div>\n                            <div class=\"text-muted\">\n                              <span>{h.hora}</span>\n                              -\n                              <span>{h.observaciones} (Observaciones)</span>\n                            </div>\n                          </div>\n                        </div>\n                        {/each}\n                      </div>\n\n                    </div>\n                  </div>\n                </div>\n                {/each}\n              </div>\n\n            </div>\n          </div>\n          \n          {#if user.is('assistant') && cambioHorarioPermitido || user.isAny(['admin', 'operator'])}\n          <article class=\"card m-b-30 horarioEspecialista\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">\n                <i class=\"mdi mdi-calendar-text\" />\n                Horario del especialista\n              </h5>\n            </div>\n            <div class=\"card-body\">\n              {#each diasSemana as item}\n              <DiaSemana on:cambioHorario={cargarHorarios} on:cambioHorario={buscarDisponibilidadHorario}\n                {item} {tandas} {horarios} medicoID={id} />\n              {/each}\n            </div>\n          </article>\n          {/if}\n        </div>\n\n      </div>\n    </div>\n  </section>\n</main>\n\n<form id=\"frmUsuario\" on:submit|preventDefault={guardar}>\n  <div class=\"modal fade modal-slide-right\"\n    id=\"modalUsuario\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"modalUsuarioLabel\"\n    style=\"display: none; padding-right: 16px;\"\n    aria-modal=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"modalUsuarioLabel\">Usuario</h5>\n          <button\n            type=\"button\"\n            class=\"close\"\n            data-dismiss=\"modal\"\n            aria-label=\"Close\">\n            <span aria-hidden=\"true\">×</span>\n          </button>\n        </div>\n        <div class=\"modal-body\" style=\"height: 100% !important; top: 0; overflow: auto;\">\n\n            <input type=\"hidden\" name=\"IdUser\" value=\"0\" />\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Prefijo</label>\n                <select\n                  class=\"form-control\"\n                  name=\"prefijo\"\n                  bind:value={obj.prefix} required>\n                  <option value=\"\">- Seleccionar -</option>\n                  {#each prefijos as item}\n                    <option value={item.value}>{item.name}</option>\n                  {/each}\n                </select>\n              </div>\n            </div>\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Nombre Completo</label>\n                <input\n                  type=\"name\"\n                  class=\"form-control\"\n                  placeholder=\"Ing. John Doe\"\n                  bind:value={obj.name}\n                  name=\"Name\"\n                  maxlength=\"200\"\n                  required />\n              </div>\n            </div>\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <label for=\"\">Usuario</label>\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  autocomplete=\"off\"\n                  name=\"UserName\"\n                  id=\"\"\n                  maxlength=\"100\" />\n              </div>\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Email</label>\n                <input\n                  type=\"email\"\n                  required\n                  class=\"form-control\"\n                  placeholder=\"usuario@correo.com\"\n                  bind:value={obj.email}\n                  autocomplete=\"off\"\n                  name=\"Email\"\n                  id=\"txtCorreo\"\n                  maxlength=\"100\" />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Telefono</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  data-mask=\"(000) 000-0000\"\n                  data-mask-clearifnotmatch=\"true\"\n                  autocomplete=\"off\"\n                  maxlength=\"14\"\n                  placeholder=\"(809) 000-0000\"\n                  bind:value={obj.phoneNumber}/>\n              </div>\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Ubicacion</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  autocomplete=\"off\"\n                  bind:value={obj.ubicacion}/>\n              </div>\n\n              <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <label for=\"\">exequatur</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  utocomplete=\"off\"\n                  name=\"Exequatur\"\n                  id=\"txtTelefono\" />\n              </div>\n              <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <select\n                  name=\"IdDepartamento\"\n                  class=\"js-select2 select2-hidden-accessible\"\n                  id=\"sltDepartamentos\"\n                  style=\"width: 100%;\"\n                  aria-hidden=\"true\"\n                  tabindex=\"-1\">\n                  <option value=\"\" />\n                  <option value=\"1\">Psiquiatría</option>\n                </select>\n                <span class=\"select2 select2-container select2-container--default\"\n                  dir=\"ltr\"\n                  style=\"width: 100%;\">\n                  <span class=\"selection\">\n                    <span class=\"select2-selection select2-selection--single\"\n                      role=\"combobox\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\"\n                      tabindex=\"0\"\n                      aria-labelledby=\"select2-sltDepartamentos-container\">\n                      <span class=\"select2-selection__rendered\"\n                        id=\"select2-sltDepartamentos-container\"\n                        role=\"textbox\"\n                        aria-readonly=\"true\">\n                        <span class=\"select2-selection__placeholder\">\n                          - Departamento -\n                        </span>\n                      </span>\n                      <span class=\"select2-selection__arrow\" role=\"presentation\">\n                        <b role=\"presentation\" />\n                      </span>\n                    </span>\n                  </span>\n                  <span class=\"dropdown-wrapper\" aria-hidden=\"true\" />\n                </span>\n              </div>\n            </div>\n            <br />\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\"\n              class=\"btn btn-secondary\"\n              data-dismiss=\"modal\">\n              Cerrar\n            </button>\n            <button type=\"submit\" class=\"btn btn-success\">Guardar</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n",
    "<script>\n  import Aside from \"../../Layout/Aside.svelte\";\n  import Header from \"../../Layout/Header.svelte\";\n  import { push } from \"svelte-spa-router\";\n  import { activePage, host, axios, session, errorConexion, toast } from \"../../store\";\n  import { onMount } from \"svelte\";\n  // import Swal from 'sweetalert2';\n\n  $axios.defaults.headers.common = {\n    Authorization: $session.authorizationHeader.Authorization\n  };\n\n  $activePage = \"mantenimiento.usuarios.index\";\n\n  $: filterRoles = roles.map(x => {\n    return {\n      id : x.id,\n      name : x.name,\n      displayName: x.displayName,\n      checked: rolesUser.some(y => y == x.name)\n    }\n  }).filter(x => x.displayName.toLowerCase().includes(busquedaRoles.toLowerCase()));\n\n  let asistentesAsignado = [];\n  let asistentes = [];\n  let perfiles = [];\n  let roles = [];\n  let rolesUser = [];\n  let list = [];\n  let prefijos = [\n    {value: 'Dr', name: 'Dr.'},\n    {value: 'Dra', name: 'Dra.'},\n    {value: 'Lic', name: 'Lic.'},\n    {value: 'Lida', name: 'Lida.'},\n    {value: 'Sr', name: 'Sr.'},\n    {value: 'Sra', name: 'Sra.'},\n  ]\n  let obj = {\n    prefix: \"\",\n    name: \"\",\n    email: \"\",\n    phoneNumber: \"\",\n    passwordHash: \"\",\n    ubicacion: \"\",\n    isDoctor: false,\n    perfilID: null\n  };\n  let userID = \"\";\n  let busqueda = \"\";\n  let busquedaRoles = \"\";\n  let asistenteID = \"\";\n\n  onMount(() => {\n    cargar();\n    cargarAsistentes();\n    cargarPerfil();\n    cargarRoles()\n  });\n\n  function cargar() {\n    $axios.get(\"/Users?keyword=\" + busqueda)\n    .then(res => {\n        list = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarDetalle(id) {\n    userID = id;\n    $axios.get(\"/Users/\" + id)\n    .then(res => {\n        userID = id\n        obj = res.data;\n        cargarAsistentesAsignado();\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarPerfil() {\n    $axios.get(\"/Perfiles/GetAll\").then(res => {\n        perfiles = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarAsistentesAsignado() {\n    $axios.get(\"/Medicos/\" + userID + \"/Asistentes\")\n    .then(res => {\n        asistentesAsignado = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarAsistentes() {\n    $axios.get(\"/Users/assistant/All\")\n    .then(res => {\n        asistentes = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarRoles() {\n    $axios.get(\"/Roles\")\n    .then(res => {\n        roles = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n  function cargarRolesUser(id) {\n    userID = id;\n    $axios.get(\"Users/\" + userID + \"/Roles\")\n    .then(res => {\n        rolesUser = res.data;\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n  }\n\n  function guardar() {\n    if (userID == \"\") {\n      $axios.post(\"/Users\", obj)\n      .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Usuario guardado con exito'\n          })\n          jQuery('#modalUsuario').modal('hide');\n          cargar();\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n    } else {\n      $axios.put(\"/Users/\" + userID, obj)\n      .then(res => {\n        if (res.data.success) {\n          $toast(5000).fire({\n            icon: 'success',\n            title: 'Usuario guardado con exito'\n          })\n          jQuery('#modalUsuario').modal('hide');\n          cargar();\n        }\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      });\n    }\n  }\n  function agregarRol(rol, checked) {\n    checked = Boolean(checked)\n    if (checked) {\n      $axios.post('/Users/' + userID + \"/RemoveFrom?role=\" + rol)\n      .then(res => {\n        cargarRolesUser(userID)\n      }).catch(err => {\n        console.error(err);\n        $errorConexion()\n      })\n    } else {\n      $axios.post('/Users/' + userID + \"/AddTo?role=\" + rol)\n      .then(res => {\n        cargarRolesUser(userID)\n      }).catch(err => {\n        console.error(err); \n        $errorConexion()\n      })\n    }\n  }\n  function agregarAsistente() {\n    let obj = {\n      AsistenteID: asistenteID,\n      MedicoID: userID\n    }\n\n    if (asistentesAsignado.some(e => e.asistenteID == asistenteID && e.medicoID == userID)) {\n      return;\n    }\n\n    $axios.post('/MedicosAsistentes', obj)\n    .then(res => {\n      if (res.data.success) {\n        cargarAsistentesAsignado();\n      }\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    })\n  }\n  function eliminarAsistente(item) {\n    let obj = {\n      AsistenteID: item.asistenteID,\n      MedicoID: item.medicoID\n    }\n    let qs = Object.entries(obj).map(e => e.join('=')).join('&');\n\n    $axios.delete('/MedicosAsistentes?' + qs)\n    .then(res => {\n      if (res.data.success) {\n        cargarAsistentesAsignado();\n      }\n    }).catch(err => {\n      console.error(err);\n      $errorConexion()\n    })\n  }\n\n  function agregarNuevo() {\n    userID = \"\";\n    obj = {\n      prefix: \"\",\n      name: \"\",\n      email: \"\",\n      phoneNumber: \"\",\n      passwordHash: \"\",\n      ubicacion: \"\",\n      isDoctor: false,\n      perfilID: null\n    }\n  }\n\n</script>\n\n<style>\n  .icon-rol {\n    color: #95aac9;\n  }\n</style>\n\n<Aside />\n\n<main class=\"admin-main\">\n  <Header />\n  <section class=\"admin-content\">\n    <div class=\"container\">\n      <div class=\"row\">\n\n        <div class=\"mt-4 col-md-12\">\n          <div class=\"row\">\n            <div class=\"col-md-5\">\n              <div class=\"input-group input-group-flush mb-3\">\n                <input\n                  type=\"search\"\n                  class=\"form-control form-control-appended\"\n                  placeholder=\"Buscar\"\n                  bind:value={busqueda}\n                  on:input={cargar} />\n                <div class=\"input-group-append\">\n                  <div class=\"input-group-text\">\n                    <span class=\"mdi mdi-magnify\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <button class=\"btn m-b-30 ml-2 mr-2 ml-3 btn-primary\"\n              on:click={agregarNuevo}\n              data-toggle=\"modal\"\n              data-target=\"#modalUsuario\">\n              <i class=\"mdi mdi-account-plus\" />\n              Nuevo usuario\n            </button>\n          </div>\n        </div>\n\n        <div class=\"col-lg-12\">\n          <div class=\"card m-b-30\">\n            <div class=\"card-header\">\n              <h5 class=\"m-b-0\">Usuarios</h5>\n\n            </div>\n            <div class=\"card-body\">\n              <div class=\"m-b-30\">\n                <div class=\"table-responsive\">\n                  <table class=\"table align-td-middle\">\n                    <thead>\n                      <tr>\n                        <th>Nombres</th>\n                        <!-- <th>Usuario</th> -->\n                        <th>Correo</th>\n                        <th />\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {#each list as i}\n                        <tr>\n                          <td>\n                            <div class=\"avatar avatar-sm mr-2 d-block-sm\">\n                              <div class=\"avatar avatar-sm\">\n                                <span class=\"avatar-title rounded-circle \">{i.name[0]}</span>\n                              </div>\n                            </div>\n                            <span>{i.name}</span>\n                          </td>\n                          <td>{i.email}</td>\n                          <td>\n                            <div style=\"width: 150px; text-align: right;\" class=\"ml-auto\">\n                              {#if i.isDoctor}\n                              <a href=\"#/Medico/Perfil/{i.id}\">\n                                <i class=\" mdi-24px mdi mdi-doctor\" />\n                              </a>\n                              {/if}\n                              <a href=\"#!\"\n                                on:click={() => cargarDetalle(i.id)}\n                                data-toggle=\"modal\"\n                                style=\"cursor: pointer;\"\n                                data-placement=\"top\"\n                                data-target=\"#modalUsuario\"\n                                data-original-title=\"Modificar usuario\"\n                                class=\"icon-table hover-cursor\">\n                                <i class=\" mdi-24px mdi mdi-circle-edit-outline\" />\n                              </a>\n                              <a href=\"#!\"\n                                on:click={() => cargarRolesUser(i.id)}\n                                data-toggle=\"modal\"\n                                data-target=\"#modalRoles\"\n                                data-placement=\"bottom\"\n                                title=\"Asignar Roles\"\n                                class=\"icon-rol\">\n                                <i class=\" mdi-24px mdi mdi-security\" />\n                              </a>\n                              \n                            </div>\n                          </td>\n                        </tr>\n                      {/each}\n\n                    </tbody>\n                  </table>\n\n                </div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </section>\n</main>\n\n<form id=\"frmUsuario\" on:submit|preventDefault={guardar}>\n  <div class=\"modal fade modal-slide-right\"\n    id=\"modalUsuario\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"modalUsuarioLabel\"\n    style=\"display: none; padding-right: 16px;\"\n    aria-modal=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"modalUsuarioLabel\">Usuario</h5>\n          <button\n            type=\"button\"\n            class=\"close\"\n            data-dismiss=\"modal\"\n            aria-label=\"Close\">\n            <span aria-hidden=\"true\">×</span>\n          </button>\n        </div>\n        <div class=\"modal-body\" style=\"height: 100% !important; top: 0; overflow: auto;\">\n\n            <input type=\"hidden\" name=\"IdUser\" value=\"0\" />\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Prefijo</label>\n                <select\n                  class=\"form-control\"\n                  name=\"prefijo\"\n                  bind:value={obj.prefix} required>\n                  <option value=\"\" disabled>- Seleccionar -</option>\n                  {#each prefijos as item}\n                    <option value={item.value}>{item.name}</option>\n                  {/each}\n                </select>\n              </div>\n            </div>\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Nombre Completo</label>\n                <input\n                  type=\"name\"\n                  class=\"form-control\"\n                  placeholder=\"Ing. John Doe\"\n                  bind:value={obj.name}\n                  name=\"Name\"\n                  maxlength=\"200\"\n                  required />\n              </div>\n            </div>\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <label for=\"\">Usuario</label>\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  autocomplete=\"off\"\n                  name=\"UserName\"\n                  id=\"\"\n                  maxlength=\"100\" />\n              </div>\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Email</label>\n                <input\n                  type=\"email\"\n                  required\n                  class=\"form-control\"\n                  placeholder=\"usuario@correo.com\"\n                  bind:value={obj.email}\n                  autocomplete=\"off\"\n                  name=\"Email\"\n                  id=\"txtCorreo\"\n                  maxlength=\"100\" />\n              </div>\n            </div>\n            {#if userID == \"\"}\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Contraseña</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control\"\n                  required\n                  bind:value={obj.passwordHash}\n                  name=\"PasswordHash\"\n                  maxlength=\"50\" />\n              </div>\n            </div>\n            {/if}\n\n            <div class=\"form-row\">\n              <div class=\"form-group col-md-12\">\n                <label for=\"\">Telefono</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  data-mask=\"(000) 000-0000\"\n                  data-mask-clearifnotmatch=\"true\"\n                  autocomplete=\"off\"\n                  maxlength=\"14\"\n                  placeholder=\"(809) 000-0000\"\n                  bind:value={obj.phoneNumber}/>\n              </div>\n              <div class=\"form-group col-md-12\">\n                <label class=\"cstm-switch\">\n                  <input\n                    type=\"checkbox\"\n                    value=\"true\"\n                    name=\"EsMedico\"\n                    bind:checked={obj.isDoctor}\n                    class=\"cstm-switch-input\" />\n                  <span class=\"cstm-switch-indicator \" />\n                  <span class=\"cstm-switch-description\">Es Medico</span>\n                </label>\n              </div>\n              {#if obj.isDoctor}\n                <div class=\"form-group col-md-12\">\n                  <label for=\"\">Ubicacion</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    bind:value={obj.ubicacion} required/>\n                </div>\n                <div class=\"form-group col-md-12\">\n                  <label for=\"\">Perfil</label>\n                  <select class=\"form-control\" name=\"perfil\"\n                    bind:value={obj.perfilID} required>\n                    <option value=\"\" disabled selected>- Seleccionar -</option>\n                    {#each perfiles as item}\n                      <option value={item.id}>{item.nombre}</option>\n                    {/each}\n                  </select>\n                </div>\n                {#if userID != \"\" && userID != undefined}\n                <div class=\"form-group col-md-12\">\n                  <label for=\"\">Asistentes</label>\n                  <!-- svelte-ignore a11y-no-onchange -->\n                  <select\n                    class=\"form-control\"\n                    name=\"asistentes\"\n                    bind:value={asistenteID}\n                    on:change={agregarAsistente}>\n                    <option value=\"\" disabled>- Agregar -</option>\n                    {#each asistentes as item}\n                    <option value={item.id}>{item.name}</option>\n                    {/each}\n                  </select>\n                </div>\n                <div class=\"agregados col-lg-12\">\n                  {#each asistentesAsignado as item}\n                  <button type=\"button\" \n                  class=\"btn btn-primary btn-block\"\n                  on:click={ () => eliminarAsistente(item) }>{item.nombreAsistente}</button>\n                  {/each}\n                </div>\n                {/if}\n              {/if}\n\n              <!-- <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <label for=\"\">exequatur</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  utocomplete=\"off\"\n                  name=\"Exequatur\"\n                  id=\"txtTelefono\" />\n              </div> -->\n              <!-- <div class=\"form-group col-md-12\" style=\"display: none;\">\n                <select\n                  name=\"IdDepartamento\"\n                  class=\"js-select2 select2-hidden-accessible\"\n                  id=\"sltDepartamentos\"\n                  style=\"width: 100%;\"\n                  aria-hidden=\"true\"\n                  tabindex=\"-1\">\n                  <option value=\"\" />\n                  <option value=\"1\">Psiquiatría</option>\n                </select>\n                <span class=\"select2 select2-container select2-container--default\"\n                  dir=\"ltr\"\n                  style=\"width: 100%;\">\n                  <span class=\"selection\">\n                    <span class=\"select2-selection select2-selection--single\"\n                      role=\"combobox\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\"\n                      tabindex=\"0\"\n                      aria-labelledby=\"select2-sltDepartamentos-container\">\n                      <span class=\"select2-selection__rendered\"\n                        id=\"select2-sltDepartamentos-container\"\n                        role=\"textbox\"\n                        aria-readonly=\"true\">\n                        <span class=\"select2-selection__placeholder\">\n                          - Departamento -\n                        </span>\n                      </span>\n                      <span class=\"select2-selection__arrow\" role=\"presentation\">\n                        <b role=\"presentation\" />\n                      </span>\n                    </span>\n                  </span>\n                  <span class=\"dropdown-wrapper\" aria-hidden=\"true\" />\n                </span>\n              </div> -->\n            </div>\n            <br />\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\"\n              class=\"btn btn-secondary\"\n              data-dismiss=\"modal\">\n              Cerrar\n            </button>\n            <button type=\"submit\" class=\"btn btn-success\">Guardar</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n\n<div\n  class=\"modal fade modal-slide-right\"\n  id=\"modalRoles\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"modalRolesLabel\"\n  style=\"display: none; padding-right: 16px;\"\n  aria-modal=\"true\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"modalRolesLabel\">Roles</h5>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">×</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n\n        <form id=\"\">\n          <input type=\"hidden\" name=\"idPaciente\" value=\"\" />\n          <p>\n            <span class=\"badge badge-soft-primary\" style=\"font-size: 17px;\" />\n          </p>\n          <div class=\"form-group floating-label\">\n            <label>Buscar</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              bind:value={busquedaRoles}\n              placeholder=\"Buscar roles\" />\n          </div>\n          <div class=\"roles\">\n            {#each filterRoles as item}\n            <div class=\"lista-rol m-b-10\">\n              <label class=\"cstm-switch d-flex bd-highlight\">\n                <span class=\"cstm-switch-description mr-auto bd-highlight\">\n                  {item.displayName}\n                </span>\n                <input\n                  type=\"checkbox\"\n                  name=\"option\"\n                  value={item.id}\n                  bind:checked={item.checked}\n                  on:click={() => agregarRol(item.name, item.checked)}\n                  class=\"cstm-switch-input\" />\n                <span class=\"cstm-switch-indicator bg-success bd-highlight\" />\n              </label>\n            </div>\n            {/each}\n\n          </div>\n        </form>\n\n      </div>\n    </div>\n  </div>\n</div>\n"
  ],
  "names": [],
  "mappings": "AAmBE,KAAK,SAAS,cAAC,CAAC,AACd,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,OAAO,CAAC,KAAK,CAAC,GAAG,AAC3B,CAAC;ACqND,kBAAkB,4BAAC,CAAC,AAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,AACX,CAAC,AAED,gCAAkB,CAAC,aAAa,cAAC,CAAC,AAChC,MAAM,CAAE,IAAI,CAAC,UAAU,CACvB,GAAG,CAAE,CAAC,CACN,QAAQ,CAAE,KAAK,CAAC,UAAU,AAC5B,CAAC,AAED,gCAAkB,CAAC,WAAW,cAAC,CAAC,AAC9B,MAAM,CAAE,IAAI,CAAC,UAAU,CACvB,GAAG,CAAE,CAAC,CACN,QAAQ,CAAE,IAAI,AAChB,CAAC;ACkGD,aAAa,4BAAC,CAAC,AACb,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,2BAAa,CAAC,EAAE,cAAC,CAAC,AAChB,OAAO,CAAE,IAAI,AACf,CAAC,AAmBD,kBAAkB,4BAAC,CAAC,AAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,AACX,CAAC,AAED,gCAAkB,CAAC,aAAa,cAAC,CAAC,AAChC,MAAM,CAAE,IAAI,CAAC,UAAU,CACvB,GAAG,CAAE,CAAC,CACN,QAAQ,CAAE,KAAK,CAAC,UAAU,AAC5B,CAAC,AAED,gCAAkB,CAAC,WAAW,cAAC,CAAC,AAC9B,MAAM,CAAE,IAAI,CAAC,UAAU,CACvB,GAAG,CAAE,CAAC,CACN,QAAQ,CAAE,IAAI,AAChB,CAAC,AACD,mBAAK,CAAC,EAAE,2BAAa,CAAC,AACpB,kBAAkB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAC5C,eAAe,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CACpC,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,AAC9B,CAAC;ACtND,gCAAkB,CAAC,WAAW,cAAC,CAAC,AAC9B,MAAM,CAAE,IAAI,CAAC,UAAU,CACvB,GAAG,CAAE,CAAC,CACN,QAAQ,CAAE,IAAI,AAChB,CAAC,AAED,4CAAgB,WAAW,IAAI,CAAC,AAAC,CAAC,AAChC,gBAAgB,CAAE,SAAS,AAC7B,CAAC,AAED,gBAAgB,4BAAC,CAAC,AAChB,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CACjB,YAAY,CAAE,IAAI,CAClB,gBAAgB,CAAE,WAAW,CAC7B,aAAa,CAAE,CAAC,CAAC,UAAU,AAC7B,CAAC,AAED,eAAe,4BAAC,CAAC,AACf,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,2CAAe,MAAM,AAAC,CAAC,AACrB,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,AAC9C,CAAC,AACD,cAAc,4BAAC,CAAC,AACd,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AAC5C,CAAC,AACD,4CAAgB,CAAC,AACf,eAAe,UAAU,CAAC;EAC5B,CAAC;AC7BD,yBAAW,CAAC,mBAAK,MAAM,CACvB,yBAAW,CAAC,mBAAK,OAAO,AAAC,CAAC,AACxB,GAAG,CAAE,CAAC,AACR,CAAC;ACtCD,gBAAgB,8BAAC,CAAC,AAChB,aAAa,CAAE,CAAC,CAAC,UAAU,AAC7B,CAAC,AACD,8CAAgB,WAAW,AAAC,CAAC,AAC3B,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,gBAAgB,OAAO,8BAAC,CAAC,AACvB,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,aAAa,CAAE,GAAG,CAAC,UAAU,AAC/B,CAAC,AACD,gBAAgB,sBAAO,CAAC,WAAW,eAAC,CAAC,AACnC,KAAK,CAAE,KAAK,CAAC,UAAU,AACzB,CAAC,AACD,4CAAc,CAAC,AACb,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,AAC9C,CAAC;ACwID,+BAAgB,WAAW,IAAI,CAAC,AAAC,CAAC,AAChC,gBAAgB,CAAE,SAAS,AAC7B,CAAC,AACD,gBAAgB,eAAC,CAAC,AAChB,OAAO,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CACzB,YAAY,CAAE,CAAC,CACf,WAAW,CAAE,CAAC,CACd,aAAa,CAAE,CAAC,AAClB,CAAC,AACD,+BAAgB,YAAY,AAAC,CAAC,AAC5B,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,+BAAgB,WAAW,AAAC,CAAC,AAC3B,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,KAAK,SAAS,eAAC,CAAC,AACd,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,OAAO,CAAC,KAAK,CAAC,GAAG,AAC3B,CAAC,AACD,2BAAY,CAAE,UAAU,eAAC,CAAC,AACxB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC3B,CAAC;ACrFD,SAAS,cAAC,CAAC,AACT,KAAK,CAAE,OAAO,AAChB,CAAC"
}